'use strict';

exports.__esModule = true;

var _create = require('babel-runtime/core-js/object/create');

var _create2 = _interopRequireDefault(_create);

var _ = require('./');

var _2 = _interopRequireDefault(_);

var _delegatedApi = require('../../utils/delegated-api');

var _testRunTracker = require('../test-run-tracker');

var _testRunTracker2 = _interopRequireDefault(_testRunTracker);

var _runtime = require('../../errors/runtime');

var _types = require('../../errors/types');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const testControllerProxy = (0, _create2.default)(null);

(0, _delegatedApi.delegateAPI)(testControllerProxy, _2.default.API_LIST, {
    getHandler(propName, accessor) {
        const testRun = _testRunTracker2.default.resolveContextTestRun();

        if (!testRun) {
            let callsiteName = null;

            if (accessor === 'getter') callsiteName = 'get';else if (accessor === 'setter') callsiteName = 'set';else callsiteName = propName;

            throw new _runtime.APIError(callsiteName, _types.RUNTIME_ERRORS.testControllerProxyCannotResolveTestRun);
        }

        return testRun.controller;
    }
});

exports.default = testControllerProxy;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hcGkvdGVzdC1jb250cm9sbGVyL3Byb3h5LmpzIl0sIm5hbWVzIjpbInRlc3RDb250cm9sbGVyUHJveHkiLCJUZXN0Q29udHJvbGxlciIsIkFQSV9MSVNUIiwiZ2V0SGFuZGxlciIsInByb3BOYW1lIiwiYWNjZXNzb3IiLCJ0ZXN0UnVuIiwidGVzdFJ1blRyYWNrZXIiLCJyZXNvbHZlQ29udGV4dFRlc3RSdW4iLCJjYWxsc2l0ZU5hbWUiLCJBUElFcnJvciIsIlJVTlRJTUVfRVJST1JTIiwidGVzdENvbnRyb2xsZXJQcm94eUNhbm5vdFJlc29sdmVUZXN0UnVuIiwiY29udHJvbGxlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxzQkFBc0Isc0JBQWMsSUFBZCxDQUE1Qjs7QUFFQSwrQkFBWUEsbUJBQVosRUFBaUNDLFdBQWVDLFFBQWhELEVBQTBEO0FBQ3REQyxlQUFZQyxRQUFaLEVBQXNCQyxRQUF0QixFQUFnQztBQUM1QixjQUFNQyxVQUFVQyx5QkFBZUMscUJBQWYsRUFBaEI7O0FBRUEsWUFBSSxDQUFDRixPQUFMLEVBQWM7QUFDVixnQkFBSUcsZUFBZSxJQUFuQjs7QUFFQSxnQkFBSUosYUFBYSxRQUFqQixFQUNJSSxlQUFlLEtBQWYsQ0FESixLQUVLLElBQUlKLGFBQWEsUUFBakIsRUFDREksZUFBZSxLQUFmLENBREMsS0FHREEsZUFBZUwsUUFBZjs7QUFFSixrQkFBTSxJQUFJTSxpQkFBSixDQUFhRCxZQUFiLEVBQTJCRSxzQkFBZUMsdUNBQTFDLENBQU47QUFDSDs7QUFFRCxlQUFPTixRQUFRTyxVQUFmO0FBQ0g7QUFsQnFELENBQTFEOztrQkFxQmViLG1CIiwiZmlsZSI6ImFwaS90ZXN0LWNvbnRyb2xsZXIvcHJveHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGVzdENvbnRyb2xsZXIgZnJvbSAnLi8nO1xuaW1wb3J0IHsgZGVsZWdhdGVBUEkgfSBmcm9tICcuLi8uLi91dGlscy9kZWxlZ2F0ZWQtYXBpJztcbmltcG9ydCB0ZXN0UnVuVHJhY2tlciBmcm9tICcuLi90ZXN0LXJ1bi10cmFja2VyJztcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSAnLi4vLi4vZXJyb3JzL3J1bnRpbWUnO1xuaW1wb3J0IHsgUlVOVElNRV9FUlJPUlMgfSBmcm9tICcuLi8uLi9lcnJvcnMvdHlwZXMnO1xuXG5jb25zdCB0ZXN0Q29udHJvbGxlclByb3h5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuZGVsZWdhdGVBUEkodGVzdENvbnRyb2xsZXJQcm94eSwgVGVzdENvbnRyb2xsZXIuQVBJX0xJU1QsIHtcbiAgICBnZXRIYW5kbGVyIChwcm9wTmFtZSwgYWNjZXNzb3IpIHtcbiAgICAgICAgY29uc3QgdGVzdFJ1biA9IHRlc3RSdW5UcmFja2VyLnJlc29sdmVDb250ZXh0VGVzdFJ1bigpO1xuXG4gICAgICAgIGlmICghdGVzdFJ1bikge1xuICAgICAgICAgICAgbGV0IGNhbGxzaXRlTmFtZSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChhY2Nlc3NvciA9PT0gJ2dldHRlcicpXG4gICAgICAgICAgICAgICAgY2FsbHNpdGVOYW1lID0gJ2dldCc7XG4gICAgICAgICAgICBlbHNlIGlmIChhY2Nlc3NvciA9PT0gJ3NldHRlcicpXG4gICAgICAgICAgICAgICAgY2FsbHNpdGVOYW1lID0gJ3NldCc7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY2FsbHNpdGVOYW1lID0gcHJvcE5hbWU7XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBBUElFcnJvcihjYWxsc2l0ZU5hbWUsIFJVTlRJTUVfRVJST1JTLnRlc3RDb250cm9sbGVyUHJveHlDYW5ub3RSZXNvbHZlVGVzdFJ1bik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGVzdFJ1bi5jb250cm9sbGVyO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB0ZXN0Q29udHJvbGxlclByb3h5O1xuIl19
