'use strict';

exports.__esModule = true;
exports.buildChromeArgs = buildChromeArgs;
const IN_DOCKER_FLAGS = exports.IN_DOCKER_FLAGS = ['--no-sandbox', '--disable-dev-shm-usage'];

function buildChromeArgs({ config, cdpPort, platformArgs, tempProfileDir, inDocker }) {
    let chromeArgs = [].concat(cdpPort ? [`--remote-debugging-port=${cdpPort}`] : [], !config.userProfile ? [`--user-data-dir=${tempProfileDir.path}`] : [], config.headless ? ['--headless'] : [], config.userArgs ? [config.userArgs] : [], platformArgs ? [platformArgs] : []).join(' ');

    if (inDocker) {
        IN_DOCKER_FLAGS.forEach(inDockerFlag => {
            if (!chromeArgs.includes(inDockerFlag)) chromeArgs = chromeArgs.concat(' ', inDockerFlag);
        });
    }

    return chromeArgs;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9icm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2RlZGljYXRlZC9jaHJvbWUvYnVpbGQtY2hyb21lLWFyZ3MuanMiXSwibmFtZXMiOlsiYnVpbGRDaHJvbWVBcmdzIiwiSU5fRE9DS0VSX0ZMQUdTIiwiY29uZmlnIiwiY2RwUG9ydCIsInBsYXRmb3JtQXJncyIsInRlbXBQcm9maWxlRGlyIiwiaW5Eb2NrZXIiLCJjaHJvbWVBcmdzIiwiY29uY2F0IiwidXNlclByb2ZpbGUiLCJwYXRoIiwiaGVhZGxlc3MiLCJ1c2VyQXJncyIsImpvaW4iLCJmb3JFYWNoIiwiaW5Eb2NrZXJGbGFnIiwiaW5jbHVkZXMiXSwibWFwcGluZ3MiOiI7OztRQUVnQkEsZSxHQUFBQSxlO0FBRlQsTUFBTUMsNENBQWtCLENBQUMsY0FBRCxFQUFpQix5QkFBakIsQ0FBeEI7O0FBRUEsU0FBU0QsZUFBVCxDQUEwQixFQUFFRSxNQUFGLEVBQVVDLE9BQVYsRUFBbUJDLFlBQW5CLEVBQWlDQyxjQUFqQyxFQUFpREMsUUFBakQsRUFBMUIsRUFBdUY7QUFDMUYsUUFBSUMsYUFBYSxHQUNaQyxNQURZLENBRVRMLFVBQVUsQ0FBRSwyQkFBMEJBLE9BQVEsRUFBcEMsQ0FBVixHQUFtRCxFQUYxQyxFQUdULENBQUNELE9BQU9PLFdBQVIsR0FBc0IsQ0FBRSxtQkFBa0JKLGVBQWVLLElBQUssRUFBeEMsQ0FBdEIsR0FBbUUsRUFIMUQsRUFJVFIsT0FBT1MsUUFBUCxHQUFrQixDQUFDLFlBQUQsQ0FBbEIsR0FBbUMsRUFKMUIsRUFLVFQsT0FBT1UsUUFBUCxHQUFrQixDQUFDVixPQUFPVSxRQUFSLENBQWxCLEdBQXNDLEVBTDdCLEVBTVRSLGVBQWUsQ0FBQ0EsWUFBRCxDQUFmLEdBQWdDLEVBTnZCLEVBUVpTLElBUlksQ0FRUCxHQVJPLENBQWpCOztBQVVBLFFBQUlQLFFBQUosRUFBYztBQUNWTCx3QkFBZ0JhLE9BQWhCLENBQXdCQyxnQkFBZ0I7QUFDcEMsZ0JBQUksQ0FBQ1IsV0FBV1MsUUFBWCxDQUFvQkQsWUFBcEIsQ0FBTCxFQUNJUixhQUFhQSxXQUFXQyxNQUFYLENBQWtCLEdBQWxCLEVBQXVCTyxZQUF2QixDQUFiO0FBQ1AsU0FIRDtBQUlIOztBQUVELFdBQU9SLFVBQVA7QUFDSCIsImZpbGUiOiJicm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2RlZGljYXRlZC9jaHJvbWUvYnVpbGQtY2hyb21lLWFyZ3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgSU5fRE9DS0VSX0ZMQUdTID0gWyctLW5vLXNhbmRib3gnLCAnLS1kaXNhYmxlLWRldi1zaG0tdXNhZ2UnXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2hyb21lQXJncyAoeyBjb25maWcsIGNkcFBvcnQsIHBsYXRmb3JtQXJncywgdGVtcFByb2ZpbGVEaXIsIGluRG9ja2VyIH0pIHtcbiAgICBsZXQgY2hyb21lQXJncyA9IFtdXG4gICAgICAgIC5jb25jYXQoXG4gICAgICAgICAgICBjZHBQb3J0ID8gW2AtLXJlbW90ZS1kZWJ1Z2dpbmctcG9ydD0ke2NkcFBvcnR9YF0gOiBbXSxcbiAgICAgICAgICAgICFjb25maWcudXNlclByb2ZpbGUgPyBbYC0tdXNlci1kYXRhLWRpcj0ke3RlbXBQcm9maWxlRGlyLnBhdGh9YF0gOiBbXSxcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkbGVzcyA/IFsnLS1oZWFkbGVzcyddIDogW10sXG4gICAgICAgICAgICBjb25maWcudXNlckFyZ3MgPyBbY29uZmlnLnVzZXJBcmdzXSA6IFtdLFxuICAgICAgICAgICAgcGxhdGZvcm1BcmdzID8gW3BsYXRmb3JtQXJnc10gOiBbXVxuICAgICAgICApXG4gICAgICAgIC5qb2luKCcgJyk7XG5cbiAgICBpZiAoaW5Eb2NrZXIpIHtcbiAgICAgICAgSU5fRE9DS0VSX0ZMQUdTLmZvckVhY2goaW5Eb2NrZXJGbGFnID0+IHtcbiAgICAgICAgICAgIGlmICghY2hyb21lQXJncy5pbmNsdWRlcyhpbkRvY2tlckZsYWcpKVxuICAgICAgICAgICAgICAgIGNocm9tZUFyZ3MgPSBjaHJvbWVBcmdzLmNvbmNhdCgnICcsIGluRG9ja2VyRmxhZyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBjaHJvbWVBcmdzO1xufVxuIl19
