'use strict';

exports.__esModule = true;

var _stringify = require('babel-runtime/core-js/json/stringify');

var _stringify2 = _interopRequireDefault(_stringify);

var _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');

var _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _makeDir = require('make-dir');

var _makeDir2 = _interopRequireDefault(_makeDir);

var _tempDirectory = require('../../../../../utils/temp-directory');

var _tempDirectory2 = _interopRequireDefault(_tempDirectory);

var _promisifiedFunctions = require('../../../../../utils/promisified-functions');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = (() => {
    var _ref = (0, _asyncToGenerator3.default)(function* (proxyHostName) {
        const tempDir = yield _tempDirectory2.default.createDirectory('chrome-profile');
        const profileDirName = _path2.default.join(tempDir.path, 'Default');

        yield (0, _makeDir2.default)(profileDirName);

        const preferences = {
            'credentials_enable_service': false,

            'devtools': {
                'preferences': {
                    'currentDockState': '"undocked"',
                    'lastDockState': '"bottom"'
                }
            },

            'profile': {
                'content_settings': {
                    'exceptions': {
                        'automatic_downloads': {
                            [proxyHostName]: { setting: 1 }
                        }
                    }
                },

                'password_manager_enabled': false
            },

            'translate': {
                'enabled': false
            }
        };

        yield (0, _promisifiedFunctions.writeFile)(_path2.default.join(profileDirName, 'Preferences'), (0, _stringify2.default)(preferences));
        yield (0, _promisifiedFunctions.writeFile)(_path2.default.join(tempDir.path, 'First Run'), '');

        return tempDir;
    });

    return function (_x) {
        return _ref.apply(this, arguments);
    };
})();

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9icm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2RlZGljYXRlZC9jaHJvbWUvY3JlYXRlLXRlbXAtcHJvZmlsZS5qcyJdLCJuYW1lcyI6WyJwcm94eUhvc3ROYW1lIiwidGVtcERpciIsIlRlbXBEaXJlY3RvcnkiLCJjcmVhdGVEaXJlY3RvcnkiLCJwcm9maWxlRGlyTmFtZSIsInBhdGgiLCJqb2luIiwicHJlZmVyZW5jZXMiLCJzZXR0aW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7K0NBR2UsV0FBZ0JBLGFBQWhCLEVBQStCO0FBQzFDLGNBQU1DLFVBQWlCLE1BQU1DLHdCQUFjQyxlQUFkLENBQThCLGdCQUE5QixDQUE3QjtBQUNBLGNBQU1DLGlCQUFpQkMsZUFBS0MsSUFBTCxDQUFVTCxRQUFRSSxJQUFsQixFQUF3QixTQUF4QixDQUF2Qjs7QUFFQSxjQUFNLHVCQUFRRCxjQUFSLENBQU47O0FBRUEsY0FBTUcsY0FBYztBQUNoQiwwQ0FBOEIsS0FEZDs7QUFHaEIsd0JBQVk7QUFDUiwrQkFBZTtBQUNYLHdDQUFvQixZQURUO0FBRVgscUNBQW9CO0FBRlQ7QUFEUCxhQUhJOztBQVVoQix1QkFBVztBQUNQLG9DQUFvQjtBQUNoQixrQ0FBYztBQUNWLCtDQUF1QjtBQUNuQiw2QkFBQ1AsYUFBRCxHQUFpQixFQUFFUSxTQUFTLENBQVg7QUFERTtBQURiO0FBREUsaUJBRGI7O0FBU1AsNENBQTRCO0FBVHJCLGFBVks7O0FBc0JoQix5QkFBYTtBQUNULDJCQUFXO0FBREY7QUF0QkcsU0FBcEI7O0FBMkJBLGNBQU0scUNBQVVILGVBQUtDLElBQUwsQ0FBVUYsY0FBVixFQUEwQixhQUExQixDQUFWLEVBQW9ELHlCQUFlRyxXQUFmLENBQXBELENBQU47QUFDQSxjQUFNLHFDQUFVRixlQUFLQyxJQUFMLENBQVVMLFFBQVFJLElBQWxCLEVBQXdCLFdBQXhCLENBQVYsRUFBZ0QsRUFBaEQsQ0FBTjs7QUFFQSxlQUFPSixPQUFQO0FBQ0gsSyIsImZpbGUiOiJicm93c2VyL3Byb3ZpZGVyL2J1aWx0LWluL2RlZGljYXRlZC9jaHJvbWUvY3JlYXRlLXRlbXAtcHJvZmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IG1ha2VEaXIgZnJvbSAnbWFrZS1kaXInO1xuaW1wb3J0IFRlbXBEaXJlY3RvcnkgZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvdGVtcC1kaXJlY3RvcnknO1xuaW1wb3J0IHsgd3JpdGVGaWxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vdXRpbHMvcHJvbWlzaWZpZWQtZnVuY3Rpb25zJztcblxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAocHJveHlIb3N0TmFtZSkge1xuICAgIGNvbnN0IHRlbXBEaXIgICAgICAgID0gYXdhaXQgVGVtcERpcmVjdG9yeS5jcmVhdGVEaXJlY3RvcnkoJ2Nocm9tZS1wcm9maWxlJyk7XG4gICAgY29uc3QgcHJvZmlsZURpck5hbWUgPSBwYXRoLmpvaW4odGVtcERpci5wYXRoLCAnRGVmYXVsdCcpO1xuXG4gICAgYXdhaXQgbWFrZURpcihwcm9maWxlRGlyTmFtZSk7XG5cbiAgICBjb25zdCBwcmVmZXJlbmNlcyA9IHtcbiAgICAgICAgJ2NyZWRlbnRpYWxzX2VuYWJsZV9zZXJ2aWNlJzogZmFsc2UsXG5cbiAgICAgICAgJ2RldnRvb2xzJzoge1xuICAgICAgICAgICAgJ3ByZWZlcmVuY2VzJzoge1xuICAgICAgICAgICAgICAgICdjdXJyZW50RG9ja1N0YXRlJzogJ1widW5kb2NrZWRcIicsXG4gICAgICAgICAgICAgICAgJ2xhc3REb2NrU3RhdGUnOiAgICAnXCJib3R0b21cIidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAncHJvZmlsZSc6IHtcbiAgICAgICAgICAgICdjb250ZW50X3NldHRpbmdzJzoge1xuICAgICAgICAgICAgICAgICdleGNlcHRpb25zJzoge1xuICAgICAgICAgICAgICAgICAgICAnYXV0b21hdGljX2Rvd25sb2Fkcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcm94eUhvc3ROYW1lXTogeyBzZXR0aW5nOiAxIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICdwYXNzd29yZF9tYW5hZ2VyX2VuYWJsZWQnOiBmYWxzZVxuICAgICAgICB9LFxuXG4gICAgICAgICd0cmFuc2xhdGUnOiB7XG4gICAgICAgICAgICAnZW5hYmxlZCc6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYXdhaXQgd3JpdGVGaWxlKHBhdGguam9pbihwcm9maWxlRGlyTmFtZSwgJ1ByZWZlcmVuY2VzJyksIEpTT04uc3RyaW5naWZ5KHByZWZlcmVuY2VzKSk7XG4gICAgYXdhaXQgd3JpdGVGaWxlKHBhdGguam9pbih0ZW1wRGlyLnBhdGgsICdGaXJzdCBSdW4nKSwgJycpO1xuXG4gICAgcmV0dXJuIHRlbXBEaXI7XG59XG4iXX0=
