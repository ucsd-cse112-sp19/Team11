!function(){function initTestCafeClientDrivers(window,isIFrameWithoutSrc){var document=window.document;!function(l){"use strict";var f,h,o,m,p,i={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return m=function(e){var t=new Error("Could not find module '"+e+"'");return t.code="MODULE_NOT_FOUND",t},p=function(e,t,r){var n,o;if("function"==typeof e[t+r])return t+r;for(n=0;o=i[r][n];++n)if("function"==typeof e[t+o])return t+o;return null},f=function(e,t,r,n,o,i){var a,s,l,u,c,d;for("."!==(a=(r=r.split(/[\\/]/)).pop())&&".."!==a||(r.push(a),a="");null!=(s=r.shift());)if(s&&"."!==s&&(".."===s?(e=t.pop(),i=i.slice(0,i.lastIndexOf("/"))):(t.push(e),e=e[s],i+="/"+s),!e))throw m(n);if(a&&"function"!=typeof e[a]&&((d=p(e,a,".js"))||(d=p(e,a,".json")),d||(d=p(e,a,".css")),d||(d=p(e,a,".html")),d?a=d:2!==o&&"object"==typeof e[a]&&(t.push(e),e=e[a],i+="/"+a,a="")),!a)return 1!==o&&e[":mainpath:"]?f(e,t,e[":mainpath:"],n,1,i):f(e,t,"index",n,2,i);if(!(c=e[a]))throw m(n);return c.hasOwnProperty("module")?c.module.exports:(l={},c.module=u={exports:l,id:i+"/"+a},c.call(l,l,u,h(e,t,i)),u.exports)},o=function(e,t,r,n){var o,i=r,a=r.charAt(0),s=0;if("/"===a){if(i=i.slice(1),!(e=l["/"])){if(u)return u(r);throw m(r)}n="/",t=[]}else if("."!==a){if(o=i.split("/",1)[0],!(e=l[o])){if(u)return u(r);throw m(r)}n=o,t=[],(i=i.slice(o.length+1))||(s=(i=e[":mainpath:"])?1:(i="index",2))}return f(e,t,i,r,s,n)},(h=function(t,r,n){return function(e){return o(t,[].concat(r),e,n)}})(l,[],"")}({replicator:{":mainpath:":"index.js","index.js":function(O,P,Q){function _(e,t){this.references=e,this.transforms=t,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}var R="@t",T=/^#*@(t|r)$/,U=eval("this"),V="function"==typeof ArrayBuffer,W="function"==typeof Map,X="function"==typeof Set,Y=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],Z=Array.prototype.slice,$={serialize:function(e){return JSON.stringify(e)},deserialize:function(e){return JSON.parse(e)}};_._createRefMark=function(e){var t=Object.create(null);return t["@r"]=e,t},_.prototype._createCircularCandidate=function(e,t,r){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:r,refIdx:-1})},_.prototype._applyTransform=function(e,t,r,n){var o=Object.create(null),i=n.toSerializable(e);return"object"==typeof i&&this._createCircularCandidate(e,t,r),o[R]=n.type,o.data=this._handleValue(i,t,r),o},_.prototype._handleArray=function(e){for(var t=[],r=0;r<e.length;r++)t[r]=this._handleValue(e[r],t,r);return t},_.prototype._handlePlainObject=function(r){var n=this,o=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(e){var t=T.test(e)?"#"+e:e;o[t]=n._handleValue(r[e],o,t)}),o},_.prototype._handleObject=function(e,t,r){return this._createCircularCandidate(e,t,r),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)},_.prototype._ensureCircularReference=function(e){var t=this.circularCandidates.indexOf(e);if(-1<t){var r=this.circularCandidatesDescrs[t];return-1===r.refIdx&&(r.refIdx=r.parent?++this.circularRefCount:0),_._createRefMark(r.refIdx)}return null},_.prototype._handleValue=function(e,t,r){var n=typeof e,o="object"==n&&null!==e;if(o){var i=this._ensureCircularReference(e);if(i)return i}for(var a=0;a<this.transforms.length;a++){var s=this.transforms[a];if(s.shouldTransform(n,e))return this._applyTransform(e,t,r,s)}return o?this._handleObject(e,t,r):e},_.prototype.transform=function(){for(var e=[this._handleValue(this.references,null,null)],t=0;t<this.circularCandidatesDescrs.length;t++){var r=this.circularCandidatesDescrs[t];0<r.refIdx&&(e[r.refIdx]=r.parent[r.key],r.parent[r.key]=_._createRefMark(r.refIdx))}return e};function aa(e,t){this.references=e,this.transformMap=t,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)}aa.prototype._handlePlainObject=function(t){var r=this,n=Object.create(null),e=Object.getOwnPropertyNames(t);for(var o in e.forEach(function(e){r._handleValue(t[e],t,e),T.test(e)&&(n[e.substring(1)]=t[e],delete t[e])}),n)t[o]=n[o]},aa.prototype._handleTransformedObject=function(e,t,r){var n=e[R],o=this.transformMap[n];if(!o)throw new Error("Can't find transform for \""+n+'" type.');this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[r]=o.fromSerializable(e.data)},aa.prototype._handleCircularSelfRefDuringTransform=function(e,t,r){var n=this.references,o=void 0;Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:function(){return void 0===o&&(o=n[e]),o},set:function(e){return o=e}})},aa.prototype._handleCircularRef=function(e,t,r){-1<this.activeTransformsStack.indexOf(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,r):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[r]=this.references[e])},aa.prototype._handleValue=function(e,t,r){if("object"==typeof e&&null!==e){var n=e["@r"];if(void 0!==n)this._handleCircularRef(n,t,r);else if(e[R])this._handleTransformedObject(e,t,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this._handleValue(e[o],e,o);else this._handlePlainObject(e)}},aa.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var ba=[{type:"[[NaN]]",shouldTransform:function(e,t){return"number"===e&&isNaN(t)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(e){return"undefined"===e},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(e,t){return t instanceof Date},toSerializable:function(e){return e.getTime()},fromSerializable:function(e){var t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",shouldTransform:function(e,t){return t instanceof RegExp},toSerializable:function(e){var t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:function(e){return new RegExp(e.src,e.flags)}},{type:"[[Error]]",shouldTransform:function(e,t){return t instanceof Error},toSerializable:function(e){return{name:e.name,message:e.message,stack:e.stack}},fromSerializable:function(e){var t=new(U[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",shouldTransform:function(e,t){return V&&t instanceof ArrayBuffer},toSerializable:function(e){var t=new Int8Array(e);return Z.call(t)},fromSerializable:function(e){if(V){var t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform:function(e,t){for(var r=0;r<Y.length;r++){var n=Y[r];if("function"==typeof U[n]&&t instanceof U[n])return!0}return!1},toSerializable:function(e){return{ctorName:e.constructor.name,arr:Z.call(e)}},fromSerializable:function(e){return"function"==typeof U[e.ctorName]?new U[e.ctorName](e.arr):e.arr}},{type:"[[Map]]",shouldTransform:function(e,t){return W&&t instanceof Map},toSerializable:function(e){var r=[];return e.forEach(function(e,t){r.push(t),r.push(e)}),r},fromSerializable:function(e){if(W){for(var t=new Map,r=0;r<e.length;r+=2)t.set(e[r],e[r+1]);return t}for(var n=[],o=0;o<e.length;o+=2)n.push([e[r],e[r+1]]);return n}},{type:"[[Set]]",shouldTransform:function(e,t){return X&&t instanceof Set},toSerializable:function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},fromSerializable:function(e){if(X){for(var t=new Set,r=0;r<e.length;r++)t.add(e[r]);return t}return e}}],ca=P.exports=function(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||$,this.addTransforms(ba)};ca.prototype.addTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t];if(this.transformsMap[r.type])throw new Error('Transform with type "'+r.type+'" was already added.');this.transforms.push(r),this.transformsMap[r.type]=r}return this},ca.prototype.removeTransforms=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++){var r=e[t],n=this.transforms.indexOf(r);-1<n&&this.transforms.splice(n,1),delete this.transformsMap[r.type]}return this},ca.prototype.encode=function(e){var t=new _(e,this.transforms).transform();return this.serializer.serialize(t)},ca.prototype.decode=function(e){var t=this.serializer.deserialize(e);return new aa(t,this.transformsMap).transform()}}},testcafe:{src:{client:{driver:{"command-executors":{"browser-manipulation":{"ensure-crop-options.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t){var r=e.getBoundingClientRect(),n={left:r.left,right:r.right,top:r.top,bottom:r.bottom},o=y.styleUtils.getElementMargin(e),i=y.styleUtils.getElementPadding(e),a=y.styleUtils.getBordersWidth(e);t.originOffset={x:0,y:0};var s=n.left+e.scrollWidth+a.left+a.right,l=n.top+e.scrollHeight+a.top+a.bottom;n.right=Math.max(n.right,s),n.bottom=Math.max(n.bottom,l),t.includeBorders&&t.includePaddings?t.includeMargins&&(t.originOffset.x-=o.left,t.originOffset.y-=o.top,n.left-=o.left,n.top-=o.top,n.right+=o.right,n.bottom+=o.bottom):(t.originOffset.x+=a.left,t.originOffset.y+=a.top,n.left+=a.left,n.top+=a.top,n.right-=a.right,n.bottom-=a.bottom,t.includePaddings||(t.originOffset.x+=i.left,t.originOffset.y+=i.top,n.left+=i.left,n.top+=i.top,n.right-=i.right,n.bottom-=i.bottom));n.width=n.right-n.left,n.height=n.bottom-n.top;var u=S({min:t.crop.left,max:t.crop.right,length:t.crop.width},n.width),c=S({min:t.crop.top,max:t.crop.bottom,length:t.crop.height},n.height);if(t.crop.left=u.min,t.crop.right=u.max,t.crop.width=u.length,t.crop.top=c.min,t.crop.bottom=c.max,t.crop.height=c.length,t.crop.width<=0||t.crop.height<=0)throw new w.InvalidElementScreenshotDimensionsError(t.crop.width,t.crop.height);var d=y.styleUtils.getViewportDimensions();(n.width>d.width||n.height>d.height)&&(t.scrollToCenter=!0);var f="number"==typeof t.scrollTargetX,h="number"==typeof t.scrollTargetY;f||(t.scrollTargetX=T(t.crop.left,t.crop.right,d.width));h||(t.scrollTargetY=T(t.crop.top,t.crop.bottom,d.height));var m=(0,_.getOffsetOptions)(e,t.scrollTargetX,t.scrollTargetY),p=m.offsetX,E=m.offsetY;t.scrollTargetX=p,t.scrollTargetY=E;var g=!f||t.scrollTargetX>=t.crop.left&&t.scrollTargetX<=t.crop.right,v=!h||t.scrollTargetY>=t.crop.top&&t.scrollTargetY<=t.crop.bottom;if(!g||!v)throw new w.ActionInvalidScrollTargetError(g,v)};var n,y=r("../../deps/testcafe-core"),_=r("../../deps/testcafe-automation"),o=r("../../../../utils/limit-number"),i=(n=o)&&n.__esModule?n:{default:n},w=r("../../../../errors/test-run");function S(e,t){var r="number"==typeof e.min,n="number"==typeof e.max,o="number"==typeof e.length;return o&&(e.length=(0,i.default)(e.length,0,t)),r&&e.min<0&&(e.min+=t),n&&e.max<0&&(e.max+=t),r||(e.min=n&&o?e.max-e.length:0),n||(e.max=o?e.min+e.length:t),e.min=(0,i.default)(e.min,0,t),e.max=(0,i.default)(e.max,0,t),e.length=e.max-e.min,e}function T(e,t,r){return Math.round(e+(0,i.default)(t-e,0,r)/2)}t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return new v(e,t,r).execute()};var i=r("../../deps/hammerhead"),a=r("../../deps/testcafe-core"),s=r("../../deps/testcafe-automation"),n=r("../../deps/testcafe-ui"),l=m(r("../../status")),u=m(r("./ensure-crop-options")),c=r("../../utils/ensure-elements"),o=m(r("../../utils/run-with-barriers")),d=m(r("../../../../test-run/client-messages")),f=m(r("../../../../test-run/commands/type")),h=r("../../../../test-run/commands/options");function m(e){return e&&e.__esModule?e:{default:e}}var p=i.eventSandbox.message,E="driver|browser-manipulation|request",g="driver|browser-manipulation|response";p.on(p.SERVICE_MSG_RECEIVED_EVENT,function(t){if(t.message.cmd===E){var e=a.domUtils.findIframeByWindow(t.source),r=t.message,n=r.command,o=r.cropDimensions;o&&(n.options=new h.ElementScreenshotOptions({crop:o,includePaddings:!1}));var i=new v(n);i.element=e,i.execute().then(function(e){return p.sendServiceMsg({cmd:g,result:e},t.source)})}});var v=(y.prototype._getAbsoluteCropValues=function(){var e=this.element.getBoundingClientRect(),t=e.top,r=e.left;r+=this.command.options.originOffset.x,t+=this.command.options.originOffset.y;var n=r+this.command.options.crop.right,o=t+this.command.options.crop.bottom;return{top:t+=this.command.options.crop.top,left:r+=this.command.options.crop.left,bottom:o,right:n}},y.prototype._createManipulationReadyMessage=function(){var e=window.devicePixelRatio||1,t={cmd:d.default.readyForBrowserManipulation,pageDimensions:{dpr:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,bodyWidth:document.body.clientWidth,bodyHeight:document.body.clientHeight},disableResending:!0};return this.command.type===f.default.takeElementScreenshot&&(t.cropDimensions=this._getAbsoluteCropValues()),t},y.prototype._runScrollBeforeScreenshot=function(){var o=this;return i.Promise.resolve().then(function(){if(o.element||!o.command.selector)return i.Promise.resolve();var e=o.command.selector.timeout,t="number"==typeof e?e:o.globalSelectorTimeout;return o.statusBar.showWaitingElementStatus(t),(0,c.ensureElements)([(0,c.createElementDescriptor)(o.command.selector)],o.globalSelectorTimeout).then(function(e){o.statusBar.hideWaitingElementStatus(),o.element=e[0]}).catch(function(e){throw o.statusBar.hideWaitingElementStatus(),e})}).then(function(){(0,u.default)(o.element,o.command.options);var e=o.command.options,t=e.scrollTargetX,r=e.scrollTargetY,n=e.scrollToCenter;return new s.Scroll(o.element,new h.ScrollOptions({offsetX:t,offsetY:r,scrollToCenter:n,skipParentFrames:!0})).run()})},y.prototype._hideUI=function(){return(0,n.hide)(),this.command.markData&&(0,n.showScreenshotMark)(this.command.markData),(0,a.delay)(500)},y.prototype._showUI=function(){this.command.markData&&(0,n.hideScreenshotMark)(),(0,n.show)()},y.prototype._requestManipulation=function(){if(window.top===window)return i.transport.queuedAsyncServiceMsg(this._createManipulationReadyMessage());var e=this._getAbsoluteCropValues();return(0,a.sendRequestToFrame)({cmd:E,command:this.command,cropDimensions:e},g,window.parent).then(function(e){if(!e.result)return{result:null};var t=e.result,r=t.result,n=t.executionError;if(n)throw n;return{result:r}})},y.prototype._runManipulation=function(){var n=this,o=null;return i.Promise.resolve().then(function(){return n.command.type!==f.default.takeElementScreenshot?i.Promise.resolve():(a.scrollController.stopPropagation(),n._runScrollBeforeScreenshot())}).then(function(){return window.top===window?n._hideUI():i.Promise.resolve()}).then(function(){return n._requestManipulation()}).then(function(e){var t=e.result,r=e.error;if(r)throw r;return a.scrollController.enablePropagation(),o=t,window.top===window&&n._showUI(),(0,a.delay)(200)}).then(function(){return new l.default({isCommandResult:!0,result:o})}).catch(function(e){return a.scrollController.enablePropagation(),new l.default({isCommandResult:!0,executionError:e})})},y.prototype.execute=function(){var e=this;return(0,o.default)(function(){return e._runManipulation()}).barriersPromise},y);function y(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.element=null}t.exports=e.default}},"client-functions":{"client-function-executor.js":function(e,t,r){e.__esModule=!0;var n=r("../../deps/hammerhead"),o=l(r("../../status")),i=r("./replicator"),a=l(r("./eval-function")),s=r("../../../../errors/test-run");function l(e){return e&&e.__esModule?e:{default:e}}var u=(c.prototype.getResult=function(){var t=this;return n.Promise.resolve().then(function(){var e=t.replicator.decode(t.command.args);return t._executeFn(e)}).catch(function(e){throw e.isTestCafeError||(e=new s.UncaughtErrorInClientFunctionCode(t.command.instantiationCallsiteName,e)),e})},c.prototype.getResultDriverStatus=function(){var t=this;return this.getResult().then(function(e){return new o.default({isCommandResult:!0,result:t.replicator.encode(e)})}).catch(function(e){return new o.default({isCommandResult:!0,executionError:e})})},c.prototype._createReplicator=function(){return(0,i.createReplicator)([new i.ClientFunctionNodeTransform(this.command.instantiationCallsiteName),new i.FunctionTransform])},c.prototype._executeFn=function(e){return this.fn.apply(window,e)},c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.command=e,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(this.command.dependencies),this.fn=(0,a.default)(this.command.fnCode,this.dependencies)}e.default=u,t.exports=e.default},"eval-function.js":function(exports,module,require){exports.__esModule=!0,exports.default=evalFunction;var _hammerhead=require("../../deps/hammerhead"),_hammerhead2=_interopRequireDefault(_hammerhead);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Promise=_hammerhead2.default.Promise;function evalFunction(fnCode,__dependencies$){"use strict";return eval(fnCode)}module.exports=exports.default},"replicator.js":function(e,t,r){e.__esModule=!0,e.ClientFunctionNodeTransform=e.SelectorNodeTransform=e.FunctionTransform=void 0,e.createReplicator=function(e){return new n.default({serialize:d,deserialize:d}).addTransforms(e)};var n=l(r("replicator")),o=l(r("./eval-function")),i=r("./selector-executor/node-snapshots"),a=r("../../../../errors/test-run"),s=l(r("../../deps/hammerhead"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=window.Node,d=function(e){return e};e.FunctionTransform=(f.prototype.shouldTransform=function(e){return"function"===e},f.prototype.toSerializable=function(){return""},f.prototype.fromSerializable=function(e){var t=e.fnCode,r=e.dependencies;return(0,o.default)(t,r)},f);function f(){u(this,f),this.type="Function"}e.SelectorNodeTransform=(h.prototype._extend=function(e,r){var n=this;s.default.nativeMethods.objectKeys.call(window.Object,this.customDOMProperties).forEach(function(t){try{e[t]=n.customDOMProperties[t](r)}catch(e){throw new a.UncaughtErrorInCustomDOMPropertyCode(n.instantiationCallsiteName,e,t)}})},h.prototype.shouldTransform=function(e,t){return t instanceof c},h.prototype.toSerializable=function(e){var t=1===e.nodeType?new i.ElementSnapshot(e):new i.NodeSnapshot(e);return this._extend(t,e),t},h);function h(e){u(this,h),this.type="Node",this.customDOMProperties=e||{}}e.ClientFunctionNodeTransform=(m.prototype.shouldTransform=function(e,t){if(t instanceof c)throw new a.DomNodeClientFunctionResultError(this.instantiationCallsiteName)},m);function m(e){u(this,m),this.type="Node",this.instantiationCallsiteName=e}},"selector-executor":{"filter.js":function(e,t,r){var n,o=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r("../../../../../errors/test-run"),s=r("../../../utils/element-utils"),l=c(r("../../../deps/testcafe-core")),u=c(r("../../../deps/hammerhead"));function c(e){return e&&e.__esModule?e:{default:e}}var d=l.default.arrayUtils,f=u.default.utils.types,h=u.default.nativeMethods,m=1,p=2,E=3,g=((n={})[m]=/^\.filterVisible\(\)$/,n[p]=/^\.filterHidden\(\)$/,n[E]=/^\.nth\(\d+\)$/,n),v=(y.prototype.filter=function(e,t,r){var n=d.filter(e,s.exists);if(t.filterVisible&&(n=n.filter(s.visible),this.assertFilterError(n,r,m)),t.filterHidden&&(n=n.filter(function(e){return!(0,s.visible)(e)}),this.assertFilterError(n,r,p)),t.counterMode)n=null!==t.index?this.getNodeByIndex(n,t.index)?1:0:n.length;else{if(t.collectionMode){if(null!==t.index){var o=this.getNodeByIndex(n,t.index);n=o?[o]:[]}}else n=this.getNodeByIndex(n,t.index||0);"number"==typeof t.index&&this.assertFilterError(n,r,E)}return n},y.prototype.cast=function(e){var t=null;if(f.isNullOrUndefined(e))t=[];else if(e instanceof Node)t=[e];else{if(!(0,s.IsNodeCollection)(e))throw new a.InvalidSelectorResultError;t=e}return t},y.prototype.assertFilterError=function(e,t,r){e&&0!==e.length||(this.error=this.getErrorItem(t,r))},y.prototype.getErrorItem=function(e,t){var r=e.apiFnChain,n=e.apiFnID;if(t)for(var o=n;o<r.length;o++)if(g[t].test(r[o]))return o;return null},y.prototype.getNodeByIndex=function(e,t){return t<0?e[e.length+t]:e[t]},o(y,[{key:"error",get:function(){return this.err},set:function(e){null===this.err&&(this.err=e)}}]),y);function y(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),this.err=null}h.objectDefineProperty.call(window,window,"%testCafeSelectorFilter%",{value:new v,configurable:!0})},"index.js":function(e,t,r){e.__esModule=!0;var n,o=r("../../../deps/hammerhead"),l=r("../../../deps/testcafe-core"),i=r("../client-function-executor"),a=(n=i)&&n.__esModule?n:{default:n},u=r("../../../utils/element-utils"),c=r("../replicator");r("./filter");var d,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,d=a.default),f.prototype._createReplicator=function(){return(0,c.createReplicator)([new c.FunctionTransform])},f.prototype._getTimeoutErrorParams=function(){var e=window["%testCafeSelectorFilter%"].error,t=this.command.apiFnChain;return void 0!==e?{apiFnIndex:e,apiFnChain:t}:null},f.prototype._validateElement=function(i,a){var s=this;return o.Promise.resolve().then(function(){return s.fn.apply(window,i)}).then(function(e){var t=(0,u.exists)(e),r=!s.command.visibilityCheck||(0,u.visible)(e),n=t?s.createIsInvisibleError:s.createNotFoundError,o=new Date-a>=s.timeout;if(t&&r)return e;if(!o)return(0,l.delay)(200).then(function(){return s._validateElement(i,a)});if(n)throw n(s._getTimeoutErrorParams());return null})},f.prototype._executeFn=function(e){if(this.counterMode)return d.prototype._executeFn.call(this,e);var t=new Date,r=null,n=null;return this._validateElement(e,t).catch(function(e){r=e}).then(function(e){if(r)throw r;n=e}).then(function(){return n})},f);function f(e,t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,d.call(this,e));if(i.createNotFoundError=n,i.createIsInvisibleError=o,i.timeout="number"==typeof e.timeout?e.timeout:t,i.counterMode=i.dependencies.filterOptions.counterMode,r){var a=new Date-r;i.timeout=Math.max(i.timeout-a,0)}var s=i.dependencies&&i.dependencies.customDOMProperties;return i.replicator.addTransforms([new c.SelectorNodeTransform(s)]),i}e.default=s,t.exports=e.default},"node-snapshots.js":function(e,t,r){e.__esModule=!0,e.ElementSnapshot=e.NodeSnapshot=void 0;var n=r("../../../deps/testcafe-core"),o=r("../../../../../client-functions/selectors/snapshot-properties");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a={textContent:function(e){return e.textContent},childNodeCount:function(e){return e.childNodes.length},hasChildNodes:function(e){return!!a.childNodeCount(e)},childElementCount:function(e){var t=e.children;if(t)return t.length;for(var r=0,n=e.childNodes.length,o=0;o<n;o++)1===e.childNodes[o].nodeType&&r++;return r},hasChildElements:function(e){return!!a.childElementCount(e)}},s=e.NodeSnapshot=(l.prototype._initializeProperties=function(e,t,r){for(var n=0;n<t.length;n++){var o=t[n],i=r[o];this[o]=i?i(e):e[o]}},l);function l(e){i(this,l),this._initializeProperties(e,o.NODE_SNAPSHOT_PROPERTIES,a)}var u,c={tagName:function(e){return e.tagName.toLowerCase()},visible:n.positionUtils.isElementVisible,focused:function(e){return n.domUtils.getActiveElement()===e},attributes:function(e){for(var t=e.attributes,r={},n=t.length-1;0<=n;n--)r[t[n].name]=t[n].value;return r},boundingClientRect:function(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height}},classNames:function(e){var t=e.className;return(t="string"==typeof t.animVal?t.animVal:t).replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(e){for(var t={},r=window.getComputedStyle(e),n=0;n<r.length;n++){var o=r[n];t[o]=r[o]}return t},innerText:function(e){return e.innerText}};e.ElementSnapshot=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,u=s),d);function d(e){i(this,d);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,u.call(this,e));return t._initializeProperties(e,o.ELEMENT_SNAPSHOT_PROPERTIES,c),t}}}},"execute-action.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r,n){return new h(e,t,r,n).execute()};var i=r("../deps/hammerhead"),n=r("../deps/testcafe-core"),a=r("../deps/testcafe-automation"),s=d(r("../status")),l=d(r("../utils/run-with-barriers")),o=r("../utils/ensure-elements"),u=r("../../../errors/test-run"),c=d(r("../../../test-run/commands/type"));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!n.domUtils.isContentEditableElement(e))throw new u.ActionElementNonContentEditableError(t)}var h=(m.prototype._getSpecificTimeout=function(){return this.command.selector&&"number"==typeof this.command.selector.timeout?this.command.selector.timeout:this.globalSelectorTimeout},m.prototype._delayAfterExecution=function(){return this.command.options&&1!==this.command.options.speed?(0,n.delay)(2e3*(1-this.command.options.speed)):i.Promise.resolve()},m.prototype._isExecutionTimeoutExpired=function(){return Date.now()-this.executionStartTime>=this.commandSelectorTimeout},m.prototype._ensureCommandArguments=function(){if(this.command.type===c.default.pressKey&&(0,n.parseKeySequence)(this.command.keys).error)throw new u.ActionIncorrectKeysError("keys")},m.prototype._ensureCommandElements=function(){var t=this,e=[];return this.command.selector&&e.push((0,o.createElementDescriptor)(this.command.selector)),this.command.type===c.default.dragToElement?e.push((0,o.createAdditionalElementDescriptor)(this.command.destinationSelector,"destinationSelector")):this.command.type===c.default.selectEditableContent&&(e.push((0,o.createAdditionalElementDescriptor)(this.command.startSelector,"startSelector")),e.push((0,o.createAdditionalElementDescriptor)(this.command.endSelector||this.command.startSelector,"endSelector"))),(0,o.ensureElements)(e,this.globalSelectorTimeout).then(function(e){t.elements=e})},m.prototype._ensureCommandElementsProperties=function(){this.command.type===c.default.selectText?function(e){if(!n.domUtils.isEditableElement(e))throw new u.ActionElementNonEditableError}(this.elements[0]):this.command.type===c.default.selectTextAreaContent?function(e){if(!n.domUtils.isTextAreaElement(e))throw new u.ActionElementNotTextAreaError}(this.elements[0]):this.command.type===c.default.selectEditableContent?(f(this.elements[0],"startSelector"),f(this.elements[1],"endSelector"),function(e){if(!n.contentEditable.getNearestCommonAncestor(e[0],e[1]))throw new u.ActionRootContainerNotFoundError}(this.elements)):this.command.type!==c.default.setFilesToUpload&&this.command.type!==c.default.clearUpload||function(e){if(!n.domUtils.isFileInput(e))throw new u.ActionElementIsNotFileInputError}(this.elements[0])},m.prototype._ensureCommandOptions=function(){this.elements.length&&this.command.options&&"offsetX"in this.command.options&&"offsetY"in this.command.options&&function(e,t){var r=(0,a.getOffsetOptions)(e,t.offsetX,t.offsetY),n=r.offsetX,o=r.offsetY;t.offsetX=n,t.offsetY=o}(this.elements[0],this.command.options)},m.prototype._createAutomation=function(){var e=null;switch(this.command.type){case c.default.click:return/option|optgroup/.test(n.domUtils.getTagName(this.elements[0]))?new a.SelectChildClick(this.elements[0],this.command.options):new a.Click(this.elements[0],this.command.options);case c.default.rightClick:return new a.RClick(this.elements[0],this.command.options);case c.default.doubleClick:return new a.DblClick(this.elements[0],this.command.options);case c.default.hover:return new a.Hover(this.elements[0],this.command.options);case c.default.drag:return new a.DragToOffset(this.elements[0],this.command.dragOffsetX,this.command.dragOffsetY,this.command.options);case c.default.dragToElement:return new a.DragToElement(this.elements[0],this.elements[1],this.command.options);case c.default.typeText:return new a.Type(this.elements[0],this.command.text,this.command.options);case c.default.selectText:case c.default.selectTextAreaContent:return e=(0,a.calculateSelectTextArguments)(this.elements[0],this.command),new a.SelectText(this.elements[0],e.startPos,e.endPos,this.command.options);case c.default.selectEditableContent:return new a.SelectEditableContent(this.elements[0],this.elements[1],this.command.options);case c.default.pressKey:return new a.Press((0,n.parseKeySequence)(this.command.keys).combinations,this.command.options);case c.default.setFilesToUpload:return new a.Upload(this.elements[0],this.command.filePath,function(e){return new u.ActionCannotFindFileToUploadError(e)});case c.default.clearUpload:return new a.Upload(this.elements[0])}return null},m.prototype._runAction=function(t){var r=this;return this._ensureCommandElements().then(function(){return r._ensureCommandElementsProperties()}).then(function(){r._ensureCommandOptions();var e=r._createAutomation();return e.TARGET_ELEMENT_FOUND_EVENT?e.on(e.TARGET_ELEMENT_FOUND_EVENT,function(){r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()}):(r.statusBar.hideWaitingElementStatus(!0),r.executionStartedHandler()),e.run(t)})},m.prototype._runRecursively=function(){var t=this,e=!1,r=!0;return n.promiseUtils.whilst(function(){return!e},function(){return t._runAction(r).then(function(){e=!0}).catch(function(e){if(t._isExecutionTimeoutExpired()){if(e.message===a.ERROR_TYPES.foundElementIsNotTarget)return r=!1,i.Promise.resolve();throw e.message===a.ERROR_TYPES.elementIsInvisibleError?new u.ActionElementIsInvisibleError:e}return(0,n.delay)(250)})})},m.prototype.execute=function(){var o=this;return this.command.options&&!this.command.options.speed&&(this.command.options.speed=this.testSpeed),{startPromise:new i.Promise(function(e){o.executionStartedHandler=e}),completionPromise:new i.Promise(function(t){o.executionStartTime=new Date;try{o._ensureCommandArguments()}catch(e){return void t(new s.default({isCommandResult:!0,executionError:e}))}o.commandSelectorTimeout=o._getSpecificTimeout(),o.statusBar.showWaitingElementStatus(o.commandSelectorTimeout);var e=(0,l.default)(function(){return o._runRecursively()}),r=e.actionPromise,n=e.barriersPromise;r.then(function(){return i.Promise.all([o._delayAfterExecution(),n])}).then(function(){return t(new s.default({isCommandResult:!0}))}).catch(function(e){return o.statusBar.hideWaitingElementStatus(!1).then(function(){return t(new s.default({isCommandResult:!0,executionError:e}))})})})}},m);function m(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),this.command=e,this.globalSelectorTimeout=t,this.statusBar=r,this.testSpeed=n,this.elements=[],this.ensureElementsPromise=null,this.ensureElementsStartTime=null,this.executionStartTime=null,this.executionStartedHandler=null,this.commandSelectorTimeout=null}t.exports=e.default},"execute-navigate-to.js":function(e,t,r){e.__esModule=!0,e.default=function(t){var e=l.url.getNavigationUrl(t.url,window),r=n.default.Promise.resolve();e&&o.browser.isRetryingTestPagesEnabled()&&(r=o.browser.fetchPageToCache(e,s));return r.then(function(){var e=new o.RequestBarrier;return n.default.navigateTo(t.url,t.forceReload),n.default.Promise.all([e.wait(),o.pageUnloadBarrier.wait()])}).then(function(){return new i.default({isCommandResult:!0})}).catch(function(e){return new i.default({isCommandResult:!0,executionError:e})})};var n=a(r("../deps/hammerhead")),o=r("../deps/testcafe-core"),i=a(r("../status"));function a(e){return e&&e.__esModule?e:{default:e}}var s=n.default.createNativeXHR,l=n.default.utils;t.exports=e.default},"execute-selector.js":function(e,t,r){e.__esModule=!0,e.getResult=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResult().then(function(e){return i.hideWaitingElementStatus(!!e).then(function(){return e})}).catch(function(e){return i.hideWaitingElementStatus(!1).then(function(){throw e})})},e.getResultDriverStatus=function(e,t,r,n,o,i){var a=new s.default(e,t,r,n,o);return i.showWaitingElementStatus(a.timeout),a.getResultDriverStatus().then(function(e){return i.hideWaitingElementStatus(!!e.result).then(function(){return e})})};var n,o=r("./client-functions/selector-executor"),s=(n=o)&&n.__esModule?n:{default:n}}},deps:{"hammerhead.js":function(e,t,r){e.__esModule=!0,e.default=window["%hammerhead%"],t.exports=e.default},"testcafe-automation.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeAutomation%"],t.exports=e.default},"testcafe-core.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeCore%"],t.exports=e.default},"testcafe-ui.js":function(e,t,r){e.__esModule=!0,e.default=window["%testCafeUI%"],t.exports=e.default}},"driver-link":{"child.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=r("../deps/hammerhead"),a=r("../deps/testcafe-core"),s=r("../../../errors/test-run"),l=d(r("./send-message-to-driver")),u=r("./messages"),c=d(r("../status"));function d(e){return e&&e.__esModule?e:{default:e}}var f=(h.prototype._ensureIframe=function(){var e=this;return a.domUtils.isElementInDocument(this.driverIframe)?(0,a.waitFor)(function(){return a.positionUtils.isElementVisible(e.driverIframe)?e.driverIframe:null},200,this.iframeAvailabilityTimeout).catch(function(){throw new s.CurrentIframeIsInvisibleError}):i.Promise.reject(new s.CurrentIframeNotFoundError)},h.prototype._waitForIframeRemovedOrHidden=function(){var t=this;return new i.Promise(function(e){t.checkIframeInterval=i.nativeMethods.setInterval.call(window,function(){t._ensureIframe().catch(function(){return(0,a.delay)(500).then(function(){return e(new c.default({isCommandResult:!0}))})})},1e3)})},h.prototype._waitForCommandResult=function(){var t=this,r=null;return i.Promise.race([this._waitForIframeRemovedOrHidden(),new i.Promise(function(t){r=function(e){e.message.type===u.TYPE.commandExecuted&&t(e.message.driverStatus)},i.eventSandbox.message.on(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r)})]).then(function(e){return i.eventSandbox.message.off(i.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,r),i.nativeMethods.clearInterval.call(window,t.checkIframeInterval),e})},h.prototype.confirmConnectionEstablished=function(e){var t=new u.ConfirmationMessage(e,{id:this.driverId});i.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},h.prototype.executeCommand=function(t,r){var n=this;return this._ensureIframe().then(function(){var e=new u.ExecuteCommandMessage(t,r);return i.Promise.all([(0,l.default)(e,n.driverWindow,n.iframeAvailabilityTimeout,s.CurrentIframeIsNotLoadedError),n._waitForCommandResult()])}).then(function(e){return e[1]})},n(h,[{key:"availabilityTimeout",set:function(e){this.iframeAvailabilityTimeout=e}}]),h);function h(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),this.driverWindow=e,this.driverIframe=a.domUtils.findIframeByWindow(e),this.driverId=t,this.iframeAvailabilityTimeout=0}e.default=f,t.exports=e.default},"messages.js":function(e,t,r){e.__esModule=!0,e.SetNativeDialogHandlerMessage=e.ConfirmationMessage=e.ExecuteCommandMessage=e.CommandExecutedMessage=e.EstablishConnectionMessage=e.TYPE=void 0;var n,o=r("../generate-id"),i=(n=o)&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){l(this,u),this.type=e,this.id=(0,i.default)()}var c,d=e.TYPE={establishConnection:"driver|establish-connection",commandExecuted:"driver|command-executed",executeCommand:"driver|execute-command",confirmation:"driver|confirmation",setNativeDialogHandler:"driver|set-native-dialog-handler"};e.EstablishConnectionMessage=(s(f,c=u),f);function f(){return l(this,f),a(this,c.call(this,d.establishConnection))}var h;e.CommandExecutedMessage=(s(m,h=u),m);function m(e){l(this,m);var t=a(this,h.call(this,d.commandExecuted));return t.driverStatus=e,t}var p;e.ExecuteCommandMessage=(s(E,p=u),E);function E(e,t){l(this,E);var r=a(this,p.call(this,d.executeCommand));return r.command=e,r.testSpeed=t,r}var g;e.ConfirmationMessage=(s(v,g=u),v);function v(e,t){l(this,v);var r=a(this,g.call(this,d.confirmation));return r.requestMessageId=e,r.result=t,r}var y;e.SetNativeDialogHandlerMessage=(s(_,y=u),_);function _(e){l(this,_);var t=a(this,y.call(this,d.setNativeDialogHandler));return t.dialogHandler=e,t}},"parent.js":function(e,t,r){e.__esModule=!0;var n,o=r("../deps/hammerhead"),i=r("./messages"),a=r("../../../errors/test-run"),s=r("./send-message-to-driver"),l=(n=s)&&n.__esModule?n:{default:n};var u=(c.prototype.establishConnection=function(){var e=new i.EstablishConnectionMessage;return(0,l.default)(e,this.driverWindow,5e3,a.CurrentIframeIsNotLoadedError).then(function(e){return e.result.id})},c.prototype.confirmMessageReceived=function(e){var t=new i.ConfirmationMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},c.prototype.onCommandExecuted=function(e){var t=new i.CommandExecutedMessage(e);o.eventSandbox.message.sendServiceMsg(t,this.driverWindow)},c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.driverWindow=e}e.default=u,t.exports=e.default},"send-message-to-driver.js":function(e,t,r){e.__esModule=!0,e.default=function(r,e,t,n){var o=null,i=null;t=Math.max(t||0,u);return a.Promise.race([(0,s.delay)(t),new a.Promise(function(t){i=function(e){e.message.type===l.TYPE.confirmation&&e.message.requestMessageId===r.id&&t(e.message)},a.eventSandbox.message.on(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),o=a.nativeMethods.setInterval.call(window,function(){return a.eventSandbox.message.sendServiceMsg(r,e)},c),a.eventSandbox.message.sendServiceMsg(r,e)})]).then(function(e){if(a.nativeMethods.clearInterval.call(window,o),a.nativeMethods.clearTimeout.call(window,null),a.eventSandbox.message.off(a.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,i),!e)throw new n;return e})};var a=r("../deps/hammerhead"),s=r("../deps/testcafe-core"),l=r("./messages"),u=2500,c=1e3;t.exports=e.default}},"driver.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=R(r("./deps/hammerhead")),a=r("./deps/testcafe-core"),s=r("./deps/testcafe-ui"),l=R(r("../../test-run/client-messages")),u=R(r("../../test-run/commands/type")),c=r("../../test-run/commands/utils"),d=r("../../errors/test-run"),f=R(r("../../test-run/browser-console-messages")),h=R(r("./native-dialog-tracker")),m=r("./driver-link/messages"),p=R(r("./storage")),E=R(r("./status")),g=R(r("./generate-id")),v=R(r("./driver-link/child")),y=R(r("./command-executors/execute-action")),_=R(r("./command-executors/browser-manipulation")),w=R(r("./command-executors/execute-navigate-to")),S=r("./command-executors/execute-selector"),T=R(r("./command-executors/client-functions/client-function-executor"));function R(e){return e&&e.__esModule?e:{default:e}}var C=i.default.transport,b=i.default.Promise,I=i.default.eventSandbox.message,x=i.default.storages,N=i.default.nativeMethods,A=N.date,O="testcafe|driver|test-done-sent-flag",M="testcafe|driver|pending-status",P="testcafe|driver|executing-client-function-descriptor",D="testcafe|driver|selector-execution-start-time",U="testcafe|driver|pending-page-error",F="testcafe|driver|active-iframe-selector",k="testcafe|driver|test-speed",j="testcafe|driver|assertion-retries-timeout",B="testcafe|driver|assertion-retries-start-time",H="testcafe|driver|console-messages",L={NotLoadedError:d.ActionIframeIsNotLoadedError,NotFoundError:d.ActionElementNotFoundError,IsInvisibleError:d.ActionElementIsInvisibleError},W={NotLoadedError:d.CurrentIframeIsNotLoadedError,NotFoundError:d.CurrentIframeNotFoundError,IsInvisibleError:d.CurrentIframeIsInvisibleError},V=(G.prototype._onJsError=function(e){if(this.skipJsErrors||this.contextStorage.getItem(O))return b.resolve();var t=new d.UncaughtErrorOnPage(e.stack,e.pageUrl);return this.contextStorage.getItem(U)||this.contextStorage.setItem(U,t),null},G.prototype._unlockPageAfterTestIsDone=function(){return(0,a.disableRealEventsPreventing)(),b.resolve()},G.prototype._failIfClientCodeExecutionIsInterrupted=function(){var e=this.contextStorage.getItem(P);return!!e&&(this._onReady(new E.default({isCommandResult:!0,executionError:new d.ClientFunctionExecutionInterruptionError(e.instantiationCallsiteName)})),!0)},G.prototype._onConsoleMessage=function(e){var t=e.meth,r=e.line,n=this.consoleMessages;n.addMessage(t,r),this.consoleMessages=n},G.prototype._addPendingErrorToStatus=function(e){var t=this.contextStorage.getItem(U);t&&(this.contextStorage.setItem(U,null),e.pageError=t)},G.prototype._addUnexpectedDialogErrorToStatus=function(e){var t=this.nativeDialogsTracker.getUnexpectedDialogError();e.pageError=e.pageError||t},G.prototype._addConsoleMessagesToStatus=function(e){e.consoleMessages=this.consoleMessages,this.consoleMessages=null},G.prototype._sendStatusRequest=function(e){function t(){return(0,a.getTimeLimitedPromise)(C.asyncServiceMsg(n),5e3)}function r(){return(0,a.delay)(300).then(t)}for(var n={cmd:l.default.ready,status:e,disableResending:!0,allowRejecting:!0},o=t(),i=0;i<5;i++)o=o.catch(r);return o},G.prototype._sendStatus=function(e){var t=this;e.resent||(this._addPendingErrorToStatus(e),this._addUnexpectedDialogErrorToStatus(e),this._addConsoleMessagesToStatus(e)),this.contextStorage.setItem(M,e);var r=null;return a.pageUnloadBarrier.wait(0).then(function(){return t._sendStatusRequest(e)}).then(function(e){return r=e,a.pageUnloadBarrier.wait(0)}).then(function(){return t.contextStorage.setItem(M,null),r})},G.prototype._initChildDriverListening=function(){var i=this;I.on(I.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message,r=e.source;if(t.type===m.TYPE.establishConnection){var n=i._getChildDriverLinkByWindow(r);if(!n){var o=i.testRunId+"-"+(0,g.default)();n=new v.default(r,o),i.childDriverLinks.push(n)}n.confirmConnectionEstablished(t.id)}})},G.prototype._getChildDriverLinkByWindow=function(t){return this.childDriverLinks.filter(function(e){return e.driverWindow===t})[0]},G.prototype._runInActiveIframe=function(e){var t=this,r=b.resolve(),n=this.contextStorage.getItem(F);!this.activeChildDriverLink&&n&&(r=this._switchToIframe(n,W)),r.then(function(){return t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!0),t.activeChildDriverLink.executeCommand(e,t.speed)}).then(function(e){return t._onCommandExecutedInIframe(e)}).catch(function(e){return t._onCommandExecutedInIframe(new E.default({isCommandResult:!0,executionError:e}))})},G.prototype._onCommandExecutedInIframe=function(e){this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(e)},G.prototype._ensureChildDriverLink=function(e,t,r){var n=this;return(0,a.waitFor)(function(){return n._getChildDriverLinkByWindow(e)},500,r).catch(function(){throw new t})},G.prototype._switchToIframe=function(t,r){var n=this,o="number"==typeof t.timeout?t.timeout:this.selectorTimeout;return(0,S.getResult)(t,o,null,function(e){return new r.NotFoundError(e)},function(){return new r.IsInvisibleError},this.statusBar).then(function(e){if(!a.domUtils.isIframeElement(e))throw new d.ActionElementNotIframeError;return n._ensureChildDriverLink(N.contentWindowGetter.call(e),r.NotLoadedError,o)}).then(function(e){e.availabilityTimeout=o,n.activeChildDriverLink=e,n.contextStorage.setItem(F,t)})},G.prototype._switchToMainWindow=function(e){this.activeChildDriverLink&&this.activeChildDriverLink.executeCommand(e),this.contextStorage.setItem(F,null),this.activeChildDriverLink=null},G.prototype._setNativeDialogHandlerInIframes=function(e){for(var t=new m.SetNativeDialogHandlerMessage(e),r=0;r<this.childDriverLinks.length;r++)I.sendServiceMsg(t,this.childDriverLinks[r].driverWindow)},G.prototype._onActionCommand=function(e){var t=this,r=(0,y.default)(e,this.selectorTimeout,this.statusBar,this.speed),n=r.startPromise,o=r.completionPromise;n.then(function(){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!0)}),o.then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},G.prototype._onSetNativeDialogHandlerCommand=function(e){this.nativeDialogsTracker.setHandler(e.dialogHandler),this._setNativeDialogHandlerInIframes(e.dialogHandler),this._onReady(new E.default({isCommandResult:!0}))},G.prototype._onGetNativeDialogHistoryCommand=function(){this._onReady(new E.default({isCommandResult:!0,result:this.nativeDialogsTracker.appearedDialogs}))},G.prototype._onGetBrowserConsoleMessagesCommand=function(){this._onReady(new E.default({isCommandResult:!0}))},G.prototype._onNavigateToCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,w.default)(e).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},G.prototype._onExecuteClientFunctionCommand=function(e){var t=this;this.contextStorage.setItem(P,{instantiationCallsiteName:e.instantiationCallsiteName}),new T.default(e).getResultDriverStatus().then(function(e){t.contextStorage.setItem(P,null),t._onReady(e)})},G.prototype._onExecuteSelectorCommand=function(e){var t=this,r=this.contextStorage.getItem(D)||new A,n=e.needError?function(e){return new d.CannotObtainInfoForElementSpecifiedBySelectorError(null,e)}:null;(0,S.getResultDriverStatus)(e,this.selectorTimeout,r,n,n,this.statusBar).then(function(e){t.contextStorage.setItem(D,null),t._onReady(e)})},G.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e),this._onReady(new E.default({isCommandResult:!0}))},G.prototype._onSwitchToIframeCommand=function(e){var t=this;this._switchToIframe(e.selector,L).then(function(){return t._onReady(new E.default({isCommandResult:!0}))}).catch(function(e){return t._onReady(new E.default({isCommandResult:!0,executionError:e}))})},G.prototype._onBrowserManipulationCommand=function(e){var t=this;this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!0),(0,_.default)(e,this.selectorTimeout,this.statusBar).then(function(e){return t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t._onReady(e)})},G.prototype._onSetBreakpointCommand=function(e){var t=this;this.statusBar.showDebuggingStatus(e).then(function(e){return t._onReady(new E.default({isCommandResult:!0,result:e}))})},G.prototype._onSetTestSpeedCommand=function(e){this.speed=e.speed,this._onReady(new E.default({isCommandResult:!0}))},G.prototype._onShowAssertionRetriesStatusCommand=function(e){this.contextStorage.setItem(j,e.timeout),this.contextStorage.setItem(B,Date.now()),this.statusBar.showWaitingAssertionRetriesStatus(e.timeout),this._onReady(new E.default({isCommandResult:!0}))},G.prototype._onHideAssertionRetriesStatusCommand=function(e){var t=this;this.contextStorage.setItem(j,null),this.contextStorage.setItem(B,null),this.statusBar.hideWaitingAssertionRetriesStatus(e.success).then(function(){return t._onReady(new E.default({isCommandResult:!0}))})},G.prototype._checkStatus=function(){var n=this;return a.browser.checkStatus(this.browserStatusDoneUrl,i.default.createNativeXHR,{manualRedirect:!0}).then(function(e){var t=e.command,r=e.redirecting;r&&t.url.indexOf(n.testRunId)<0?(x.clear(),x.lock()):n.contextStorage.setItem(O,!1),r?a.browser.redirect(t):n._onReady({isCommandResult:!1})}).catch(function(){return(0,a.delay)(1e3)})},G.prototype._onCustomCommand=function(e){var t=this;(0,this.customCommandHandlers[e.type].handler)(e).then(function(e){t._onReady(new E.default({isCommandResult:!0,result:e}))})},G.prototype._onTestDone=function(e){var t=this;this.contextStorage.setItem(O,!0),this._sendStatus(e).then(function(){return t._checkStatus()})},G.prototype._onBackupStoragesCommand=function(){this._onReady(new E.default({isCommandResult:!0,result:x.backup()}))},G.prototype._onReady=function(e){var t=this;this._sendStatus(e).then(function(e){e?t._onCommand(e):t._onReady(new E.default)})},G.prototype._executeCommand=function(e){this.customCommandHandlers[e.type]?this._onCustomCommand(e):e.type===u.default.testDone?this._onTestDone(new E.default({isCommandResult:!0})):e.type===u.default.setBreakpoint?this._onSetBreakpointCommand(e.isTestError):e.type===u.default.switchToMainWindow?this._onSwitchToMainWindowCommand(e):e.type===u.default.switchToIframe?this._onSwitchToIframeCommand(e):(0,c.isBrowserManipulationCommand)(e)?this._onBrowserManipulationCommand(e):e.type===u.default.executeClientFunction?this._onExecuteClientFunctionCommand(e):e.type===u.default.executeSelector?this._onExecuteSelectorCommand(e):e.type===u.default.navigateTo?this._onNavigateToCommand(e):e.type===u.default.setNativeDialogHandler?this._onSetNativeDialogHandlerCommand(e):e.type===u.default.getNativeDialogHistory?this._onGetNativeDialogHistoryCommand(e):e.type===u.default.getBrowserConsoleMessages?this._onGetBrowserConsoleMessagesCommand(e):e.type===u.default.setTestSpeed?this._onSetTestSpeedCommand(e):e.type===u.default.showAssertionRetriesStatus?this._onShowAssertionRetriesStatusCommand(e):e.type===u.default.hideAssertionRetriesStatus?this._onHideAssertionRetriesStatusCommand(e):e.type===u.default.backupStorages?this._onBackupStoragesCommand():this._onActionCommand(e)},G.prototype._isExecutableInTopWindowOnly=function(e){if((0,c.isExecutableInTopWindowOnly)(e))return!0;var t=this.customCommandHandlers[e.type];return t&&t.isExecutableInTopWindowOnly},G.prototype._onCommand=function(r){var n=this;this.readyPromise.then(function(){var e=(0,c.isCommandRejectableByPageError)(r);if(n.contextStorage.getItem(U)&&e)n._onReady(new E.default({isCommandResult:!0}));else{var t=n.activeChildDriverLink||n.contextStorage.getItem(F);n._isExecutableInTopWindowOnly(r)||!t?n._executeCommand(r):n._runInActiveIframe(r)}})},G.prototype.setCustomCommandHandlers=function(e,t,r){this.customCommandHandlers[e]={isExecutableInTopWindowOnly:r,handler:t}},G.prototype.start=function(){var r=this;this.contextStorage=new p.default(window,this.testRunId),this.nativeDialogsTracker=new h.default(this.contextStorage,this.dialogHandler),this.speed||(this.speed=this.initialSpeed),a.browser.startHeartbeat(this.heartbeatUrl,i.default.createNativeXHR),this.statusBar=new s.StatusBar(this.userAgent,this.fixtureName,this.testName),this.statusBar.on(this.statusBar.UNLOCK_PAGE_BTN_CLICK,a.disableRealEventsPreventing),this.readyPromise.then(function(){r.statusBar.hidePageLoadingStatus();var e=r.contextStorage.getItem(j);if(e){var t=r.contextStorage.getItem(B);0<e-(new Date-t)&&r.statusBar.showWaitingAssertionRetriesStatus(e,t)}});var e=this.contextStorage.getItem(M);if(e&&(e.resent=!0),this.contextStorage.getItem(O))e?this._onTestDone(e):this._checkStatus();else if(!this._failIfClientCodeExecutionIsInterrupted()){var t=this.contextStorage.getItem(this.COMMAND_EXECUTING_FLAG)||this.contextStorage.getItem(this.EXECUTING_IN_IFRAME_FLAG),n=e||new E.default({isCommandResult:t});this.contextStorage.setItem(this.COMMAND_EXECUTING_FLAG,!1),this.contextStorage.setItem(this.EXECUTING_IN_IFRAME_FLAG,!1),this._onReady(n)}},n(G,[{key:"speed",set:function(e){this.contextStorage.setItem(k,e)},get:function(){return this.contextStorage.getItem(k)}},{key:"consoleMessages",get:function(){return new f.default(this.contextStorage.getItem(H))},set:function(e){return this.contextStorage.setItem(H,e?e.getCopy():null)}}]),G);function G(e,t,r,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,G),this.COMMAND_EXECUTING_FLAG="testcafe|driver|command-executing-flag",this.EXECUTING_IN_IFRAME_FLAG="testcafe|driver|executing-in-iframe-flag",this.testRunId=e,this.heartbeatUrl=t.heartbeat,this.browserStatusUrl=t.status,this.browserStatusDoneUrl=t.statusDone,this.userAgent=r.userAgent,this.fixtureName=r.fixtureName,this.testName=r.testName,this.selectorTimeout=n.selectorTimeout,this.pageLoadTimeout=n.pageLoadTimeout,this.initialSpeed=n.speed,this.skipJsErrors=n.skipJsErrors,this.dialogHandler=n.dialogHandler,this.customCommandHandlers={},this.contextStorage=null,this.nativeDialogsTracker=null,this.childDriverLinks=[],this.activeChildDriverLink=null,this.statusBar=null,n.retryTestPages&&a.browser.enableRetryingTestPages(),this.pageInitialRequestBarrier=new a.RequestBarrier,this.readyPromise=a.eventUtils.documentReady(this.pageLoadTimeout).then(function(){return o.pageInitialRequestBarrier.wait(!0)}),this._initChildDriverListening(),a.pageUnloadBarrier.init(),(0,a.preventRealEvents)(),i.default.on(i.default.EVENTS.uncaughtJsError,function(e){return o._onJsError(e)}),i.default.on(i.default.EVENTS.unhandledRejection,function(e){return o._onJsError(e)}),i.default.on(i.default.EVENTS.consoleMethCalled,function(e){return o._onConsoleMessage(e)}),this.setCustomCommandHandlers(u.default.unlockPage,function(){return o._unlockPageAfterTestIsDone()})}e.default=V,t.exports=e.default},"embedding-utils.js":function(e,t,r){e.__esModule=!0;var n,o=r("./command-executors/client-functions/selector-executor/node-snapshots"),i=r("./command-executors/client-functions/selector-executor"),a=(n=i)&&n.__esModule?n:{default:n};e.default={NodeSnapshot:o.NodeSnapshot,ElementSnapshot:o.ElementSnapshot,SelectorExecutor:a.default},t.exports=e.default},"generate-id.js":function(e,t,r){e.__esModule=!0,e.default=function(){return"function"==typeof n.nativeMethods.performanceNow?n.nativeMethods.performanceNow().toString():(n.nativeMethods.dateNow()+Math.random()).toString()};var n=r("./deps/hammerhead");t.exports=e.default},"iframe-driver.js":function(e,t,r){e.__esModule=!0;var n=r("./deps/hammerhead"),o=r("./deps/testcafe-core"),i=r("./deps/testcafe-ui"),a=f(r("./driver")),s=f(r("./storage")),l=f(r("./status")),u=f(r("./driver-link/parent")),c=r("./driver-link/messages"),d=f(r("./native-dialog-tracker/iframe"));function f(e){return e&&e.__esModule?e:{default:e}}var h,m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,h=a.default),p.prototype._onJsError=function(){},p.prototype._onConsoleMessage=function(){},p.prototype._initParentDriverListening=function(){var r=this;n.eventSandbox.message.on(n.eventSandbox.message.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;o.pageUnloadBarrier.wait(0).then(function(){if(t.type===c.TYPE.executeCommand){if(r.lastParentDriverMessageId===t.id)return;r.lastParentDriverMessageId=t.id,r.readyPromise.then(function(){r.speed=t.testSpeed,r.parentDriverLink.confirmMessageReceived(t.id),r._onCommand(t.command)})}t.type===c.TYPE.setNativeDialogHandler&&(r.nativeDialogsTracker.setHandler(t.dialogHandler),r._setNativeDialogHandlerInIframes(t.dialogHandler))})})},p.prototype._onSwitchToMainWindowCommand=function(e){this._switchToMainWindow(e)},p.prototype._onReady=function(e){this.parentDriverLink.onCommandExecuted(e)},p.prototype.start=function(){var t=this;this.nativeDialogsTracker=new d.default(this.dialogHandler),this.statusBar=new i.IframeStatusBar;var e=this.parentDriverLink.establishConnection().then(function(e){t.contextStorage=new s.default(window,e),t._failIfClientCodeExecutionIsInterrupted()||(t.contextStorage.getItem(t.COMMAND_EXECUTING_FLAG)||t.contextStorage.getItem(t.EXECUTING_IN_IFRAME_FLAG))&&(t.contextStorage.setItem(t.COMMAND_EXECUTING_FLAG,!1),t.contextStorage.setItem(t.EXECUTING_IN_IFRAME_FLAG,!1),t._onReady(new l.default({isCommandResult:!0})))});this.readyPromise=n.Promise.all([this.readyPromise,e])},p);function p(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,h.call(this,e,{},{},t));return r.lastParentDriverMessageId=null,r.parentDriverLink=new u.default(window.parent),r._initParentDriverListening(),r}e.default=m,t.exports=e.default},"index.js":function(e,t,r){var n=l(r("./deps/hammerhead")),o=l(r("./driver")),i=l(r("./iframe-driver")),a=l(r("./script-execution-barrier")),s=l(r("./embedding-utils"));function l(e){return e&&e.__esModule?e:{default:e}}var u=n.default.nativeMethods,c=n.default.EVENTS.evalIframeScript;u.objectDefineProperty(window,"%testCafeDriver%",{configurable:!0,value:o.default}),u.objectDefineProperty(window,"%testCafeIframeDriver%",{configurable:!0,value:i.default}),u.objectDefineProperty(window,"%ScriptExecutionBarrier%",{configurable:!0,value:a.default}),u.objectDefineProperty(window,"%testCafeEmbeddingUtils%",{configurable:!0,value:s.default}),n.default.on(c,function(e){return initTestCafeClientDrivers(u.contentWindowGetter.call(e.iframe),!0)})},"native-dialog-tracker":{"iframe.js":function(e,t,r){e.__esModule=!0;var n=a(r("../deps/hammerhead")),o=a(r("./messages")),i=a(r("./index"));function a(e){return e&&e.__esModule?e:{default:e}}var s,l=n.default.eventSandbox.message,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s=i.default),c.prototype._defaultDialogHandler=function(e){l.sendServiceMsg({type:o.default.unexpectedDialog,dialogType:e,url:i.default._getPageUrl()},window.top)},c.prototype._addAppearedDialogs=function(e,t){l.sendServiceMsg({type:o.default.appearedDialog,dialogType:e,text:t,url:i.default._getPageUrl()},window.top)},c.prototype._onHandlerError=function(e,t){l.sendServiceMsg({type:o.default.handlerError,dialogType:e,message:t,url:i.default._getPageUrl()},window.top)},c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,null,e))}e.default=u,t.exports=e.default},"index.js":function(e,t,r){e.__esModule=!0;var n=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e};function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=u(r("../deps/hammerhead")),a=r("../../../errors/test-run"),s=u(r("../command-executors/client-functions/client-function-executor")),l=u(r("./messages"));function u(e){return e&&e.__esModule?e:{default:e}}var c=i.default.eventSandbox.message,d=i.default.processScript,f=i.default.nativeMethods,h="testcafe|native-dialog-tracker|appeared-dialogs",m="testcafe|native-dialog-tracker|unexpected-dialog",p="testcafe|native-dialog-tracker|error-in-handler",E=d("window.location.href"),g=(v._getPageUrl=function(){return f.eval(E)},v.prototype._initListening=function(){var r=this;c.on(c.SERVICE_MSG_RECEIVED_EVENT,function(e){var t=e.message;t.type===l.default.appearedDialog?r._addAppearedDialogs(t.dialogType,t.text,t.url):t.type!==l.default.unexpectedDialog||r.unexpectedDialog?t.type!==l.default.handlerError||r.handlerError||r._onHandlerError(t.dialogType,t.message,t.url):r.unexpectedDialog={type:t.dialogType,url:t.url}})},v.prototype._init=function(){var t=this;i.default.on(i.default.EVENTS.beforeUnload,function(e){e.prevented&&!e.isFakeIEEvent&&(t.dialogHandler?t._createDialogHandler("beforeunload")(e.returnValue||""):t._defaultDialogHandler("beforeunload")),t.contextStorage&&t.contextStorage.save()}),window.alert=function(){return t._defaultDialogHandler("alert")},window.confirm=function(){return t._defaultDialogHandler("confirm")},window.prompt=function(){return t._defaultDialogHandler("prompt")}},v.prototype._createDialogHandler=function(o){var i=this;return function(e){var t=v._getPageUrl();i._addAppearedDialogs(o,e,t);var r=new s.default(i.dialogHandler),n=null;try{n=r.fn.apply(window,[o,e,t])}catch(e){i._onHandlerError(o,e.message||String(e),t)}return n}},v.prototype._defaultDialogHandler=function(e){var t=v._getPageUrl();this.unexpectedDialog=this.unexpectedDialog||{type:e,url:t}},v.prototype._addAppearedDialogs=function(e,t,r){this.appearedDialogs.splice(0,0,{type:e,text:t,url:r})},v.prototype._onHandlerError=function(e,t,r){this.handlerError=this.handlerError||{type:e,message:t,url:r}},v.prototype.setHandler=function(e){var t=this;this.dialogHandler=e,["alert","confirm","prompt"].forEach(function(e){window[e]=t.dialogHandler?t._createDialogHandler(e):function(){return t._defaultDialogHandler(e)}})},v.prototype.getUnexpectedDialogError=function(){var e=this.unexpectedDialog,t=this.handlerError;return this.unexpectedDialog=null,this.handlerError=null,e?new a.NativeDialogNotHandledError(e.type,e.url):t?new a.UncaughtErrorInNativeDialogHandler(t.type,t.message,t.url):null},n(v,[{key:"appearedDialogs",get:function(){var e=this.contextStorage.getItem(h);return e||(e=[],this.appearedDialogs=e),e},set:function(e){this.contextStorage.setItem(h,e)}},{key:"unexpectedDialog",get:function(){return this.contextStorage.getItem(m)},set:function(e){this.contextStorage.setItem(m,e)}},{key:"handlerError",get:function(){return this.contextStorage.getItem(p)},set:function(e){this.contextStorage.setItem(p,e)}}]),v);function v(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),this.contextStorage=e,this.dialogHandler=t,this._init(),this._initListening(),this.dialogHandler&&this.setHandler(t)}e.default=g,t.exports=e.default},"messages.js":function(e,t,r){e.__esModule=!0,e.default={appearedDialog:"appeared-dialog",unexpectedDialog:"unexpected-dialog",handlerError:"handler-error"},t.exports=e.default}},"script-execution-barrier.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./deps/testcafe-core");var s=i.default.Promise,l=i.default.nativeMethods,u=(c.prototype._onScriptElementAdded=function(e){var t=this,r=l.scriptSrcGetter.call(e);if(void 0!==r&&""!==r){function n(){l.removeEventListener.call(e,"load",n),l.removeEventListener.call(e,"error",n),l.clearTimeout.call(window,o),t._onScriptLoadedOrFailed()}this.scriptsCount++;var o=null;l.addEventListener.call(e,"load",n),l.addEventListener.call(e,"error",n),o=l.setTimeout.call(window,n,this.SCRIPT_LOADING_TIMEOUT)}},c.prototype._onScriptLoadedOrFailed=function(){var e=this;this.scriptsCount--,this.scriptsCount||(0,a.delay)(25).then(function(){e.resolveWaitingPromise&&(e.scriptsCount||e.resolveWaitingPromise())})},c.prototype.wait=function(){var r=this;return new s(function(e){function t(){l.clearTimeout.call(window,r.watchdog),i.default.off(i.default.EVENTS.scriptElementAdded,r.scriptElementAddedHandler),r.watchdog=null,r.resolveWaitingPromise=null,e()}r.scriptsCount?(r.watchdog=l.setTimeout.call(window,function(){return t()},r.BARRIER_TIMEOUT),r.resolveWaitingPromise=function(){return t()}):t()})},c);function c(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.watchdog=null,this.SCRIPT_LOADING_TIMEOUT=2e3,this.BARRIER_TIMEOUT=3e3,this.scriptsCount=0,this.resolveWaitingPromise=null,this.scriptElementAddedHandler=function(e){return t._onScriptElementAdded(e.el)},i.default.on(i.default.EVENTS.scriptElementAdded,this.scriptElementAddedHandler)}e.default=u,t.exports=e.default},"status.js":function(e,t,r){e.__esModule=!0;var n=i(r("../../utils/assignable")),o=i(r("./generate-id"));function i(e){return e&&e.__esModule?e:{default:e}}var a,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a=n.default),l.prototype._getAssignableProperties=function(){return[{name:"isCommandResult"},{name:"executionError"},{name:"pageError"},{name:"result"},{name:"consoleMessages"}]},l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,a.call(this,e));return t.id=(0,o.default)(),t.isCommandResult=!1,t.executionError=null,t.pageError=null,t.resent=!1,t.result=null,t.consoleMessages=null,t._assignFrom(e,!0),t}e.default=s,t.exports=e.default},"storage.js":function(e,t,r){e.__esModule=!0;var n,o=r("./deps/hammerhead"),i=(n=o)&&n.__esModule?n:{default:n};var a=i.default.json,s=i.default.nativeMethods,l=(u.prototype._loadFromStorage=function(){var e=this.storage.getItem(this.storageKey);e&&(this.data=a.parse(e),this.storage.removeItem(this.storageKey))},u.prototype.save=function(){this.storage.setItem(this.storageKey,a.stringify(this.data))},u.prototype.setItem=function(e,t){this.data[e]=t,this.save()},u.prototype.getItem=function(e){return this.data[e]},u.prototype.dispose=function(){this.storage.removeItem(this.storageKey)},u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.storage=s.winSessionStorageGetter.call(e),this.storageKey="testcafe|driver|"+t,this.data={},this._loadFromStorage()}e.default=l,t.exports=e.default},utils:{"element-utils.js":function(e,t,r){e.__esModule=!0,e.exists=function(e){return!!e},e.visible=function(e){return!(!n.domUtils.isDomElement(e)&&!n.domUtils.isTextNode(e))&&(n.domUtils.isOptionElement(e)||"optgroup"===n.domUtils.getTagName(e)?o.selectElement.isOptionElementVisible(e):n.positionUtils.isElementVisible(e))},e.IsNodeCollection=function(e){return e instanceof s||e instanceof l||function(e){if(!i(e))return!1;for(var t=0;t<e.length;t++)if(!(e[t]instanceof a))return!1;return!0}(e)};var n=r("../deps/testcafe-core"),o=r("../deps/testcafe-ui"),i=Array.isArray,a=window.Node,s=window.HTMLCollection,l=window.NodeList},"ensure-elements.js":function(e,t,r){e.__esModule=!0,e.ensureElements=function(e,t){return new u(e,t).getElements()},e.createElementDescriptor=function(e){return{selector:e,createNotFoundError:function(e){return new l.ActionElementNotFoundError(e)},createIsInvisibleError:function(){return new l.ActionElementIsInvisibleError},createHasWrongNodeTypeError:function(e){return new l.ActionSelectorMatchesWrongNodeTypeError(e)}}},e.createAdditionalElementDescriptor=function(e,t){return{selector:e,createNotFoundError:function(e){return new l.ActionAdditionalElementNotFoundError(t,e)},createIsInvisibleError:function(){return new l.ActionAdditionalElementIsInvisibleError(t)},createHasWrongNodeTypeError:function(e){return new l.ActionAdditionalSelectorMatchesWrongNodeTypeError(t,e)}}};var n,o=r("../deps/hammerhead"),a=r("../deps/testcafe-core"),i=r("../command-executors/client-functions/selector-executor"),s=(n=i)&&n.__esModule?n:{default:n},l=r("../../../errors/test-run");var u=(c.prototype._ensureElement=function(e){var t=this,r=e.selector,n=e.createNotFoundError,o=e.createIsInvisibleError,i=e.createHasWrongNodeTypeError;this.ensureElementsPromise=this.ensureElementsPromise.then(function(){return new s.default(r,t.globalSelectorTimeout,t.ensureElementsStartTime,n,o).getResult()}).then(function(e){if(!a.domUtils.isDomElement(e))throw i(a.NODE_TYPE_DESCRIPTIONS[e.nodeType]);t.elements.push(e)})},c.prototype.getElements=function(){var e=this;return this.ensureElementsPromise.then(function(){return e.elements})},c);function c(e,t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.elements=[],this.globalSelectorTimeout=t,this.ensureElementsPromise=o.Promise.resolve(),this.ensureElementsStartTime=new Date,e.forEach(function(e){return r._ensureElement(e)})}},"run-with-barriers.js":function(e,t,r){e.__esModule=!0,e.default=function(e){var t=new c.RequestBarrier,r=new d.default;c.pageUnloadBarrier.watchForPageNavigationTriggers();for(var n=null,o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var s=e.apply(void 0,i),l=s.then(function(e){return n=e,u.Promise.all([t.wait().then(function(){return r.wait()}),c.pageUnloadBarrier.wait()])}).then(function(){return n});return{actionPromise:s,barriersPromise:l}};var n,u=r("../deps/hammerhead"),c=r("../deps/testcafe-core"),o=r("../script-execution-barrier"),d=(n=o)&&n.__esModule?n:{default:n};t.exports=e.default}}}},"client-functions":{selectors:{"snapshot-properties.js":function(e,t,r){e.__esModule=!0;var n=e.NODE_SNAPSHOT_PROPERTIES=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],o=e.ELEMENT_SNAPSHOT_PROPERTIES=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"];e.SNAPSHOT_PROPERTIES=n.concat(o)}}},errors:{"test-run":{"index.js":function(e,t,r){e.__esModule=!0,e.SetNativeDialogHandlerCodeWrongTypeError=e.UncaughtErrorInNativeDialogHandler=e.NativeDialogNotHandledError=e.CurrentIframeIsInvisibleError=e.CurrentIframeNotFoundError=e.CurrentIframeIsNotLoadedError=e.ActionIframeIsNotLoadedError=e.ActionElementNotIframeError=e.RoleSwitchInRoleInitializerError=e.ForbiddenCharactersInScreenshotPathError=e.InvalidElementScreenshotDimensionsError=e.WindowDimensionsOverflowError=e.ActionInvalidScrollTargetError=e.ActionElementIsNotFileInputError=e.ActionCannotFindFileToUploadError=e.ActionIncorrectKeysError=e.ActionRootContainerNotFoundError=e.ActionElementNonContentEditableError=e.ActionElementNotTextAreaError=e.ActionElementNonEditableError=e.ActionAdditionalSelectorMatchesWrongNodeTypeError=e.ActionAdditionalElementIsInvisibleError=e.ActionAdditionalElementNotFoundError=e.ActionSelectorMatchesWrongNodeTypeError=e.ActionElementIsInvisibleError=e.ActionElementNotFoundError=e.ActionSelectorError=e.ActionUnsupportedDeviceTypeError=e.SetTestSpeedArgumentError=e.ActionStringArrayElementError=e.ActionStringOrStringArrayArgumentError=e.ActionPositiveIntegerArgumentError=e.ActionRoleArgumentError=e.ActionIntegerArgumentError=e.ActionNullableStringArgumentError=e.ActionStringArgumentError=e.ActionOptionsTypeError=e.ActionSpeedOptionError=e.ActionBooleanArgumentError=e.ActionBooleanOptionError=e.ActionPositiveIntegerOptionError=e.ActionIntegerOptionError=e.AssertionUnawaitedPromiseError=e.AssertionWithoutMethodCallError=e.AssertionExecutableArgumentError=e.ExternalAssertionLibraryError=e.UncaughtExceptionError=e.UnhandledPromiseRejectionError=e.UncaughtErrorInCustomDOMPropertyCode=e.UncaughtErrorInClientFunctionCode=e.UncaughtNonErrorObjectInTestCode=e.UncaughtErrorInTestCode=e.UncaughtErrorOnPage=e.PageLoadError=e.CannotObtainInfoForElementSpecifiedBySelectorError=e.InvalidSelectorResultError=e.DomNodeClientFunctionResultError=e.ClientFunctionExecutionInterruptionError=e.MissingAwaitError=void 0;var i=r("../types");function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){s(this,o),this.code=e,this.isTestCafeError=!0,this.callsite=null}var l,u=(n(c,l=o),c);function c(e,t,r){s(this,c);var n=a(this,l.call(this,e));return n.optionName=t,n.actualValue=r,n}var d,f=(n(h,d=o),h);function h(e,t,r){s(this,h);var n=a(this,d.call(this,e));return n.argumentName=t,n.actualValue=r,n}var m;e.MissingAwaitError=(n(p,m=o),p);function p(e){s(this,p);var t=a(this,m.call(this,i.TEST_RUN_ERRORS.missingAwaitError));return t.callsite=e,t}var E;e.ClientFunctionExecutionInterruptionError=(n(g,E=o),g);function g(e){s(this,g);var t=a(this,E.call(this,i.TEST_RUN_ERRORS.clientFunctionExecutionInterruptionError));return t.instantiationCallsiteName=e,t}var v;e.DomNodeClientFunctionResultError=(n(y,v=o),y);function y(e){s(this,y);var t=a(this,v.call(this,i.TEST_RUN_ERRORS.domNodeClientFunctionResultError));return t.instantiationCallsiteName=e,t}var _,w=(n(S,_=o),S);function S(e,t){var r=t.apiFnChain,n=t.apiFnIndex;s(this,S);var o=a(this,_.call(this,e));return o.apiFnChain=r,o.apiFnIndex=n,o}var T;e.InvalidSelectorResultError=(n(R,T=o),R);function R(){return s(this,R),a(this,T.call(this,i.TEST_RUN_ERRORS.invalidSelectorResultError))}var C;e.CannotObtainInfoForElementSpecifiedBySelectorError=(n(b,C=w),b);function b(e,t){s(this,b);var r=a(this,C.call(this,i.TEST_RUN_ERRORS.cannotObtainInfoForElementSpecifiedBySelectorError,t));return r.callsite=e,r}var I;e.PageLoadError=(n(x,I=o),x);function x(e,t){s(this,x);var r=a(this,I.call(this,i.TEST_RUN_ERRORS.pageLoadError));return r.url=t,r.errMsg=e,r}var N;e.UncaughtErrorOnPage=(n(A,N=o),A);function A(e,t){s(this,A);var r=a(this,N.call(this,i.TEST_RUN_ERRORS.uncaughtErrorOnPage));return r.errStack=e,r.pageDestUrl=t,r}var O;e.UncaughtErrorInTestCode=(n(M,O=o),M);function M(e,t){s(this,M);var r=a(this,O.call(this,i.TEST_RUN_ERRORS.uncaughtErrorInTestCode));return r.errMsg=String(e.rawMessage||e),r.callsite=e.callsite||t,r.originError=e,r}var P;e.UncaughtNonErrorObjectInTestCode=(n(D,P=o),D);function D(e){s(this,D);var t=a(this,P.call(this,i.TEST_RUN_ERRORS.uncaughtNonErrorObjectInTestCode));return t.objType=typeof e,t.objStr=String(e),t}var U;e.UncaughtErrorInClientFunctionCode=(n(F,U=o),F);function F(e,t){s(this,F);var r=a(this,U.call(this,i.TEST_RUN_ERRORS.uncaughtErrorInClientFunctionCode));return r.errMsg=String(t),r.instantiationCallsiteName=e,r}var k;e.UncaughtErrorInCustomDOMPropertyCode=(n(j,k=o),j);function j(e,t,r){s(this,j);var n=a(this,k.call(this,i.TEST_RUN_ERRORS.uncaughtErrorInCustomDOMPropertyCode,t,r));return n.errMsg=String(t),n.property=r,n.instantiationCallsiteName=e,n}var B;e.UnhandledPromiseRejectionError=(n(H,B=o),H);function H(e){s(this,H);var t=a(this,B.call(this,i.TEST_RUN_ERRORS.unhandledPromiseRejection));return t.errMsg=String(e),t}var L;e.UncaughtExceptionError=(n(W,L=o),W);function W(e){s(this,W);var t=a(this,L.call(this,i.TEST_RUN_ERRORS.uncaughtException));return t.errMsg=String(e),t}var V;e.ExternalAssertionLibraryError=(n(G,V=o),G);function G(e,t){s(this,G);var r=a(this,V.call(this,i.TEST_RUN_ERRORS.externalAssertionLibraryError));return r.errMsg=String(e),r.callsite=t,r}var z;e.AssertionExecutableArgumentError=(n(X,z=f),X);function X(e,t,r,n){s(this,X);var o=a(this,z.call(this,i.TEST_RUN_ERRORS.assertionExecutableArgumentError,e,t));return o.errMsg=n?r.rawMessage:r.message,o.originError=r,o}var Y;e.AssertionWithoutMethodCallError=(n(q,Y=o),q);function q(e){s(this,q);var t=a(this,Y.call(this,i.TEST_RUN_ERRORS.assertionWithoutMethodCallError));return t.callsite=e,t}var K;e.AssertionUnawaitedPromiseError=(n(J,K=o),J);function J(e){s(this,J);var t=a(this,K.call(this,i.TEST_RUN_ERRORS.assertionUnawaitedPromiseError));return t.callsite=e,t}var $;e.ActionIntegerOptionError=(n(Z,$=u),Z);function Z(e,t){return s(this,Z),a(this,$.call(this,i.TEST_RUN_ERRORS.actionIntegerOptionError,e,t))}var Q;e.ActionPositiveIntegerOptionError=(n(ee,Q=u),ee);function ee(e,t){return s(this,ee),a(this,Q.call(this,i.TEST_RUN_ERRORS.actionPositiveIntegerOptionError,e,t))}var te;e.ActionBooleanOptionError=(n(re,te=u),re);function re(e,t){return s(this,re),a(this,te.call(this,i.TEST_RUN_ERRORS.actionBooleanOptionError,e,t))}var ne;e.ActionBooleanArgumentError=(n(oe,ne=f),oe);function oe(e,t){return s(this,oe),a(this,ne.call(this,i.TEST_RUN_ERRORS.actionBooleanArgumentError,e,t))}var ie;e.ActionSpeedOptionError=(n(ae,ie=u),ae);function ae(e,t){return s(this,ae),a(this,ie.call(this,i.TEST_RUN_ERRORS.actionSpeedOptionError,e,t))}var se;e.ActionOptionsTypeError=(n(le,se=o),le);function le(e){s(this,le);var t=a(this,se.call(this,i.TEST_RUN_ERRORS.actionOptionsTypeError));return t.actualType=e,t}var ue;e.ActionStringArgumentError=(n(ce,ue=f),ce);function ce(e,t){return s(this,ce),a(this,ue.call(this,i.TEST_RUN_ERRORS.actionStringArgumentError,e,t))}var de;e.ActionNullableStringArgumentError=(n(fe,de=f),fe);function fe(e,t){return s(this,fe),a(this,de.call(this,i.TEST_RUN_ERRORS.actionNullableStringArgumentError,e,t))}var he;e.ActionIntegerArgumentError=(n(me,he=f),me);function me(e,t){return s(this,me),a(this,he.call(this,i.TEST_RUN_ERRORS.actionIntegerArgumentError,e,t))}var pe;e.ActionRoleArgumentError=(n(Ee,pe=f),Ee);function Ee(e,t){return s(this,Ee),a(this,pe.call(this,i.TEST_RUN_ERRORS.actionRoleArgumentError,e,t))}var ge;e.ActionPositiveIntegerArgumentError=(n(ve,ge=f),ve);function ve(e,t){return s(this,ve),a(this,ge.call(this,i.TEST_RUN_ERRORS.actionPositiveIntegerArgumentError,e,t))}var ye;e.ActionStringOrStringArrayArgumentError=(n(_e,ye=f),_e);function _e(e,t){return s(this,_e),a(this,ye.call(this,i.TEST_RUN_ERRORS.actionStringOrStringArrayArgumentError,e,t))}var we;e.ActionStringArrayElementError=(n(Se,we=f),Se);function Se(e,t,r){s(this,Se);var n=a(this,we.call(this,i.TEST_RUN_ERRORS.actionStringArrayElementError,e,t));return n.elementIndex=r,n}var Te;e.SetTestSpeedArgumentError=(n(Re,Te=f),Re);function Re(e,t){return s(this,Re),a(this,Te.call(this,i.TEST_RUN_ERRORS.setTestSpeedArgumentError,e,t))}var Ce;e.ActionUnsupportedDeviceTypeError=(n(be,Ce=f),be);function be(e,t){return s(this,be),a(this,Ce.call(this,i.TEST_RUN_ERRORS.actionUnsupportedDeviceTypeError,e,t))}var Ie;e.ActionSelectorError=(n(xe,Ie=o),xe);function xe(e,t,r){s(this,xe);var n=a(this,Ie.call(this,i.TEST_RUN_ERRORS.actionSelectorError));return n.selectorName=e,n.errMsg=r?t.rawMessage:t.message,n.originError=t,n}var Ne;e.ActionElementNotFoundError=(n(Ae,Ne=w),Ae);function Ae(e){return s(this,Ae),a(this,Ne.call(this,i.TEST_RUN_ERRORS.actionElementNotFoundError,e))}var Oe;e.ActionElementIsInvisibleError=(n(Me,Oe=o),Me);function Me(){return s(this,Me),a(this,Oe.call(this,i.TEST_RUN_ERRORS.actionElementIsInvisibleError))}var Pe;e.ActionSelectorMatchesWrongNodeTypeError=(n(De,Pe=o),De);function De(e){s(this,De);var t=a(this,Pe.call(this,i.TEST_RUN_ERRORS.actionSelectorMatchesWrongNodeTypeError));return t.nodeDescription=e,t}var Ue;e.ActionAdditionalElementNotFoundError=(n(Fe,Ue=w),Fe);function Fe(e,t){s(this,Fe);var r=a(this,Ue.call(this,i.TEST_RUN_ERRORS.actionAdditionalElementNotFoundError,t));return r.argumentName=e,r}var ke;e.ActionAdditionalElementIsInvisibleError=(n(je,ke=o),je);function je(e){s(this,je);var t=a(this,ke.call(this,i.TEST_RUN_ERRORS.actionAdditionalElementIsInvisibleError));return t.argumentName=e,t}var Be;e.ActionAdditionalSelectorMatchesWrongNodeTypeError=(n(He,Be=o),He);function He(e,t){s(this,He);var r=a(this,Be.call(this,i.TEST_RUN_ERRORS.actionAdditionalSelectorMatchesWrongNodeTypeError));return r.argumentName=e,r.nodeDescription=t,r}var Le;e.ActionElementNonEditableError=(n(We,Le=o),We);function We(){return s(this,We),a(this,Le.call(this,i.TEST_RUN_ERRORS.actionElementNonEditableError))}var Ve;e.ActionElementNotTextAreaError=(n(Ge,Ve=o),Ge);function Ge(){return s(this,Ge),a(this,Ve.call(this,i.TEST_RUN_ERRORS.actionElementNotTextAreaError))}var ze;e.ActionElementNonContentEditableError=(n(Xe,ze=o),Xe);function Xe(e){s(this,Xe);var t=a(this,ze.call(this,i.TEST_RUN_ERRORS.actionElementNonContentEditableError));return t.argumentName=e,t}var Ye;e.ActionRootContainerNotFoundError=(n(qe,Ye=o),qe);function qe(){return s(this,qe),a(this,Ye.call(this,i.TEST_RUN_ERRORS.actionRootContainerNotFoundError))}var Ke;e.ActionIncorrectKeysError=(n(Je,Ke=o),Je);function Je(e){s(this,Je);var t=a(this,Ke.call(this,i.TEST_RUN_ERRORS.actionIncorrectKeysError));return t.argumentName=e,t}var $e;e.ActionCannotFindFileToUploadError=(n(Ze,$e=o),Ze);function Ze(e){s(this,Ze);var t=a(this,$e.call(this,i.TEST_RUN_ERRORS.actionCannotFindFileToUploadError));return t.filePaths=e,t}var Qe;e.ActionElementIsNotFileInputError=(n(et,Qe=o),et);function et(){return s(this,et),a(this,Qe.call(this,i.TEST_RUN_ERRORS.actionElementIsNotFileInputError))}var tt;e.ActionInvalidScrollTargetError=(n(rt,tt=o),rt);function rt(e,t){s(this,rt);var r=a(this,tt.call(this,i.TEST_RUN_ERRORS.actionInvalidScrollTargetError));return r.properties=e?"scrollTargetY property":t?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",r}var nt;e.WindowDimensionsOverflowError=(n(ot,nt=o),ot);function ot(e){s(this,ot);var t=a(this,nt.call(this,i.TEST_RUN_ERRORS.windowDimensionsOverflowError));return t.callsite=e,t}var it;e.InvalidElementScreenshotDimensionsError=(n(at,it=o),at);function at(e,t){s(this,at);var r=a(this,it.call(this,i.TEST_RUN_ERRORS.invalidElementScreenshotDimensionsError));return e<=0?t<=0?(r.verb="are",r.dimensions="width and height"):(r.verb="is",r.dimensions="width"):(r.verb="is",r.dimensions="height"),r}var st;e.ForbiddenCharactersInScreenshotPathError=(n(lt,st=o),lt);function lt(e,t){s(this,lt);var r=a(this,st.call(this,i.TEST_RUN_ERRORS.forbiddenCharactersInScreenshotPathError));return r.screenshotPath=e,r.forbiddenCharsList=t,r}var ut;e.RoleSwitchInRoleInitializerError=(n(ct,ut=o),ct);function ct(e){s(this,ct);var t=a(this,ut.call(this,i.TEST_RUN_ERRORS.roleSwitchInRoleInitializerError));return t.callsite=e,t}var dt;e.ActionElementNotIframeError=(n(ft,dt=o),ft);function ft(){return s(this,ft),a(this,dt.call(this,i.TEST_RUN_ERRORS.actionElementNotIframeError))}var ht;e.ActionIframeIsNotLoadedError=(n(mt,ht=o),mt);function mt(){return s(this,mt),a(this,ht.call(this,i.TEST_RUN_ERRORS.actionIframeIsNotLoadedError))}var pt;e.CurrentIframeIsNotLoadedError=(n(Et,pt=o),Et);function Et(){return s(this,Et),a(this,pt.call(this,i.TEST_RUN_ERRORS.currentIframeIsNotLoadedError))}var gt;e.CurrentIframeNotFoundError=(n(vt,gt=o),vt);function vt(){return s(this,vt),a(this,gt.call(this,i.TEST_RUN_ERRORS.currentIframeNotFoundError))}var yt;e.CurrentIframeIsInvisibleError=(n(_t,yt=o),_t);function _t(){return s(this,_t),a(this,yt.call(this,i.TEST_RUN_ERRORS.currentIframeIsInvisibleError))}var wt;e.NativeDialogNotHandledError=(n(St,wt=o),St);function St(e,t){s(this,St);var r=a(this,wt.call(this,i.TEST_RUN_ERRORS.nativeDialogNotHandledError));return r.dialogType=e,r.pageUrl=t,r}var Tt;e.UncaughtErrorInNativeDialogHandler=(n(Rt,Tt=o),Rt);function Rt(e,t,r){s(this,Rt);var n=a(this,Tt.call(this,i.TEST_RUN_ERRORS.uncaughtErrorInNativeDialogHandler));return n.dialogType=e,n.errMsg=t,n.pageUrl=r,n}var Ct;e.SetNativeDialogHandlerCodeWrongTypeError=(n(bt,Ct=o),bt);function bt(e){s(this,bt);var t=a(this,Ct.call(this,i.TEST_RUN_ERRORS.setNativeDialogHandlerCodeWrongTypeError));return t.actualType=e,t}}},"types.js":function(e,t,r){e.__esModule=!0;e.TEST_RUN_ERRORS={uncaughtErrorOnPage:"E1",uncaughtErrorInTestCode:"E2",uncaughtNonErrorObjectInTestCode:"E3",uncaughtErrorInClientFunctionCode:"E4",uncaughtErrorInCustomDOMPropertyCode:"E5",unhandledPromiseRejection:"E6",uncaughtException:"E7",missingAwaitError:"E8",actionIntegerOptionError:"E9",actionPositiveIntegerOptionError:"E10",actionBooleanOptionError:"E11",actionSpeedOptionError:"E12",actionOptionsTypeError:"E14",actionBooleanArgumentError:"E15",actionStringArgumentError:"E16",actionNullableStringArgumentError:"E17",actionStringOrStringArrayArgumentError:"E18",actionStringArrayElementError:"E19",actionIntegerArgumentError:"E20",actionRoleArgumentError:"E21",actionPositiveIntegerArgumentError:"E22",actionSelectorError:"E23",actionElementNotFoundError:"E24",actionElementIsInvisibleError:"E26",actionSelectorMatchesWrongNodeTypeError:"E27",actionAdditionalElementNotFoundError:"E28",actionAdditionalElementIsInvisibleError:"E29",actionAdditionalSelectorMatchesWrongNodeTypeError:"E30",actionElementNonEditableError:"E31",actionElementNotTextAreaError:"E32",actionElementNonContentEditableError:"E33",actionElementIsNotFileInputError:"E34",actionRootContainerNotFoundError:"E35",actionIncorrectKeysError:"E36",actionCannotFindFileToUploadError:"E37",actionUnsupportedDeviceTypeError:"E38",actionIframeIsNotLoadedError:"E39",actionElementNotIframeError:"E40",actionInvalidScrollTargetError:"E41",currentIframeIsNotLoadedError:"E42",currentIframeNotFoundError:"E43",currentIframeIsInvisibleError:"E44",nativeDialogNotHandledError:"E45",uncaughtErrorInNativeDialogHandler:"E46",setTestSpeedArgumentError:"E47",setNativeDialogHandlerCodeWrongTypeError:"E48",clientFunctionExecutionInterruptionError:"E49",domNodeClientFunctionResultError:"E50",invalidSelectorResultError:"E51",cannotObtainInfoForElementSpecifiedBySelectorError:"E52",externalAssertionLibraryError:"E53",pageLoadError:"E54",windowDimensionsOverflowError:"E55",forbiddenCharactersInScreenshotPathError:"E56",invalidElementScreenshotDimensionsError:"E57",roleSwitchInRoleInitializerError:"E58",assertionExecutableArgumentError:"E59",assertionWithoutMethodCallError:"E60",assertionUnawaitedPromiseError:"E61"},e.RUNTIME_ERRORS={cannotCreateMultipleLiveModeRunners:"E1000",cannotRunLiveModeRunnerMultipleTimes:"E1001",browserDisconnected:"E1002",cannotRunAgainstDisconnectedBrowsers:"E1003",cannotEstablishBrowserConnection:"E1004",cannotFindBrowser:"E1005",browserProviderNotFound:"E1006",browserNotSet:"E1007",testSourcesNotSet:"E1008",noTestsToRun:"E1009",cannotFindReporterForAlias:"E1010",multipleStdoutReporters:"E1011",optionValueIsNotValidRegExp:"E1012",optionValueIsNotValidKeyValue:"E1013",invalidSpeedValue:"E1014",invalidConcurrencyFactor:"E1015",cannotDivideRemotesCountByConcurrency:"E1016",portsOptionRequiresTwoNumbers:"E1017",portIsNotFree:"E1018",invalidHostname:"E1019",cannotFindSpecifiedTestSource:"E1020",clientFunctionCodeIsNotAFunction:"E1021",selectorInitializedWithWrongType:"E1022",clientFunctionCannotResolveTestRun:"E1023",regeneratorInClientFunctionCode:"E1024",invalidClientFunctionTestRunBinding:"E1025",invalidValueType:"E1026",unsupportedUrlProtocol:"E1027",testControllerProxyCannotResolveTestRun:"E1028",timeLimitedPromiseTimeoutExpired:"E1029",cannotUseScreenshotPathPatternWithoutBaseScreenshotPathSpecified:"E1030",cannotSetVideoOptionsWithoutBaseVideoPathSpecified:"E1031",multipleAPIMethodCallForbidden:"E1032",invalidReporterOutput:"E1033",cannotReadSSLCertFile:"E1034",cannotPrepareTestsDueToError:"E1035",cannotParseRawFile:"E1036",testedAppFailedWithError:"E1037",unableToOpenBrowser:"E1038",requestHookConfigureAPIError:"E1039",forbiddenCharatersInScreenshotPath:"E1040",cannotFindFFMPEG:"E1041",compositeArgumentsError:"E1042"}}},"test-run":{"browser-console-messages.js":function(e,t,r){e.__esModule=!0;var n,o=r("../utils/assignable"),i=(n=o)&&n.__esModule?n:{default:n};var a,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,a=i.default),l.prototype._getAssignableProperties=function(){return[{name:"log"},{name:"info"},{name:"warn"},{name:"error"}]},l.prototype.concat=function(e){this.log=this.log.concat(e.log),this.info=this.info.concat(e.info),this.warn=this.warn.concat(e.warn),this.error=this.error.concat(e.error)},l.prototype.addMessage=function(e,t){this[e].push(t)},l.prototype.getCopy=function(){for(var e={},t=this._getAssignableProperties(),r=0,n=t.length;r<n;r++){var o=t[r];e[o.name]=this[o.name].slice()}return e},l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,a.call(this));return t.log=[],t.info=[],t.warn=[],t.error=[],t._assignFrom(e),t}e.default=s,t.exports=e.default},"client-messages.js":function(e,t,r){e.__esModule=!0,e.default={ready:"ready",readyForBrowserManipulation:"ready-for-browser-manipulation",waitForFileDownload:"wait-for-file-download"},t.exports=e.default},commands:{"options.js":function(e,t,r){e.__esModule=!0,e.AssertionOptions=e.ResizeToFitDeviceOptions=e.DragToElementOptions=e.TypeOptions=e.MoveOptions=e.ClickOptions=e.MouseOptions=e.ElementScreenshotOptions=e.ScrollOptions=e.OffsetOptions=e.ActionOptions=e.speedOption=e.booleanOption=e.positiveIntegerOption=e.integerOption=void 0;var n,o=r("../../utils/assignable"),i=(n=o)&&n.__esModule?n:{default:n},a=r("./validations/factories"),s=r("../../errors/test-run");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d,f=e.integerOption=(0,a.createIntegerValidator)(s.ActionIntegerOptionError),h=e.positiveIntegerOption=(0,a.createPositiveIntegerValidator)(s.ActionPositiveIntegerOptionError),m=e.booleanOption=(0,a.createBooleanValidator)(s.ActionBooleanOptionError),p=e.speedOption=(0,a.createSpeedValidator)(s.ActionSpeedOptionError),E=e.ActionOptions=(c(g,d=i.default),g.prototype._getAssignableProperties=function(){return[{name:"speed",type:p}]},g);function g(e,t){l(this,g);var r=u(this,d.call(this));return r.speed=null,r._assignFrom(e,t),r}var v,y=e.OffsetOptions=(c(_,v=E),_.prototype._getAssignableProperties=function(){return v.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:f},{name:"offsetY",type:f}])},_);function _(e,t){l(this,_);var r=u(this,v.call(this));return r.offsetX=null,r.offsetY=null,r._assignFrom(e,t),r}var w;e.ScrollOptions=(c(S,w=y),S.prototype._getAssignableProperties=function(){return w.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:m},{name:"skipParentFrames",type:m}])},S);function S(e,t){l(this,S);var r=u(this,w.call(this));return r.scrollToCenter=!1,r.skipParentFrames=!1,r._assignFrom(e,t),r}var T;e.ElementScreenshotOptions=(c(R,T=E),R.prototype._getAssignableProperties=function(){return T.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:f},{name:"scrollTargetY",type:f},{name:"crop.left",type:f},{name:"crop.right",type:f},{name:"crop.top",type:f},{name:"crop.bottom",type:f},{name:"includeMargins",type:m},{name:"includeBorders",type:m},{name:"includePaddings",type:m}])},R);function R(e,t){l(this,R);var r=u(this,T.call(this));return r.scrollTargetX=null,r.scrollTargetY=null,r.includeMargins=!1,r.includeBorders=!0,r.includePaddings=!0,r.crop={left:null,right:null,top:null,bottom:null},r._assignFrom(e,t),r}var C,b=e.MouseOptions=(c(I,C=y),I.prototype._getAssignableProperties=function(){return C.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:m},{name:"modifiers.alt",type:m},{name:"modifiers.shift",type:m},{name:"modifiers.meta",type:m}])},I);function I(e,t){l(this,I);var r=u(this,C.call(this));return r.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},r._assignFrom(e,t),r}var x,N=e.ClickOptions=(c(A,x=b),A.prototype._getAssignableProperties=function(){return x.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:h}])},A);function A(e,t){l(this,A);var r=u(this,x.call(this));return r.caretPos=null,r._assignFrom(e,t),r}var O;e.MoveOptions=(c(M,O=b),M.prototype._getAssignableProperties=function(){return O.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:m},{name:"skipDefaultDragBehavior",type:m}])},M);function M(e,t){l(this,M);var r=u(this,O.call(this));return r.speed=null,r.minMovingTime=null,r.holdLeftButton=!1,r.skipScrolling=!1,r.skipDefaultDragBehavior=!1,r._assignFrom(e,t),r}var P;e.TypeOptions=(c(D,P=N),D.prototype._getAssignableProperties=function(){return P.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:m},{name:"paste",type:m}])},D);function D(e,t){l(this,D);var r=u(this,P.call(this));return r.replace=!1,r.paste=!1,r._assignFrom(e,t),r}var U;e.DragToElementOptions=(c(F,U=b),F.prototype._getAssignableProperties=function(){return U.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:f},{name:"destinationOffsetY",type:f}])},F);function F(e,t){l(this,F);var r=u(this,U.call(this,e,t));return r.destinationOffsetX=null,r.destinationOffsetY=null,r._assignFrom(e,t),r}var k;e.ResizeToFitDeviceOptions=(c(j,k=i.default),j.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:m}]},j);function j(e,t){l(this,j);var r=u(this,k.call(this));return r.portraitOrientation=!1,r._assignFrom(e,t),r}var B;e.AssertionOptions=(c(H,B=i.default),H.prototype._getAssignableProperties=function(){return[{name:"timeout",type:h},{name:"allowUnawaitedPromise",type:m}]},H);function H(e,t){l(this,H);var r=u(this,B.call(this));return r.timeout=void 0,r.allowUnawaitedPromise=!1,r._assignFrom(e,t),r}},"type.js":function(e,t,r){e.__esModule=!0,e.default={click:"click",rightClick:"right-click",doubleClick:"double-click",drag:"drag",dragToElement:"drag-to-element",hover:"hover",typeText:"type-text",selectText:"select-text",selectTextAreaContent:"select-text-area-content",selectEditableContent:"select-editable-content",pressKey:"press-key",wait:"wait",navigateTo:"navigate-to",setFilesToUpload:"set-files-to-upload",clearUpload:"clear-upload",executeClientFunction:"execute-client-function",executeSelector:"execute-selector",takeScreenshot:"take-screenshot",takeElementScreenshot:"take-element-screenshot",takeScreenshotOnFail:"take-screenshot-on-fail",prepareBrowserManipulation:"prepare-browser-manipulation",showAssertionRetriesStatus:"show-assertion-retries-status",hideAssertionRetriesStatus:"hide-assertion-retries-status",setBreakpoint:"set-breakpoint",resizeWindow:"resize-window",resizeWindowToFitDevice:"resize-window-to-fit-device",maximizeWindow:"maximize-window",switchToIframe:"switch-to-iframe",switchToMainWindow:"switch-to-main-window",setNativeDialogHandler:"set-native-dialog-handler",getNativeDialogHistory:"get-native-dialog-history",getBrowserConsoleMessages:"get-browser-console-messages",setTestSpeed:"set-test-speed",setPageLoadTimeout:"set-page-load-timeout",debug:"debug",assertion:"assertion",useRole:"useRole",testDone:"test-done",backupStorages:"backup-storages",executeExpression:"execute-expression",unlockPage:"unlock-page"},t.exports=e.default},"utils.js":function(e,t,r){e.__esModule=!0,e.isCommandRejectableByPageError=function(e){return!function(e){return s(e)||e.type===i.default.wait||e.type===i.default.assertion||e.type===i.default.executeExpression}(e)&&!c(e)&&!d(e)||u(e)&&!function(e){return e.type===i.default.switchToIframe||e.type===i.default.switchToMainWindow}(e)},e.canSetDebuggerBreakpointBeforeCommand=function(e){return e.type!==i.default.debug&&!s(e)&&!d(e)},e.isScreenshotCommand=l,e.isResizeWindowCommand=u,e.isBrowserManipulationCommand=c,e.isServiceCommand=d,e.isExecutableInTopWindowOnly=function(e){return e.type===i.default.testDone||e.type===i.default.switchToMainWindow||e.type===i.default.setNativeDialogHandler||e.type===i.default.getNativeDialogHistory||e.type===i.default.setTestSpeed||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||c(e)&&e.type!==i.default.takeElementScreenshot},e.isJSExpression=function(e){return null!==e&&"object"==typeof e&&e.type===a&&"string"==typeof e.value},e.isExecutableOnClientCommand=function(e){return e.type!==i.default.wait&&e.type!==i.default.setPageLoadTimeout&&e.type!==i.default.debug&&e.type!==i.default.useRole&&e.type!==i.default.assertion&&e.type!==i.default.executeExpression};var n,o=r("./type"),i=(n=o)&&n.__esModule?n:{default:n};var a="js-expr";function s(e){return e.type===i.default.executeClientFunction||e.type===i.default.executeSelector}function l(e){return e.type===i.default.takeScreenshot||e.type===i.default.takeElementScreenshot||e.type===i.default.takeScreenshotOnFail}function u(e){return e.type===i.default.resizeWindow||e.type===i.default.resizeWindowToFitDevice||e.type===i.default.maximizeWindow}function c(e){return l(e)||u(e)}function d(e){return e.type===i.default.testDone||e.type===i.default.showAssertionRetriesStatus||e.type===i.default.hideAssertionRetriesStatus||e.type===i.default.setBreakpoint||e.type===i.default.takeScreenshotOnFail}},validations:{"factories.js":function(e,t,r){function o(n){return function(e,t){var r=typeof t;if("number"!=r)throw new n(e,r);if(!(!isNaN(t)&&isFinite(t)&&t===Math.floor(t)))throw new n(e,t)}}e.__esModule=!0,e.createIntegerValidator=o,e.createPositiveIntegerValidator=function(r){var n=o(r);return function(e,t){if(n(e,t),t<0)throw new r(e,t)}},e.createBooleanValidator=function(n){return function(e,t){var r=typeof t;if("boolean"!=r)throw new n(e,r)}},e.createSpeedValidator=function(n){return function(e,t){var r=typeof t;if("number"!=r)throw new n(e,r);if(isNaN(t)||t<.01||1<t)throw new n(e,t)}}}}}},utils:{"assignable.js":function(e,t,r){e.__esModule=!0;var n=(o.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},o.prototype._assignFrom=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var n=this._getAssignableProperties(),o=0;o<n.length;o++){for(var i=n[o],a=i.name,s=i.type,l=i.required,u=i.init,c=i.defaultValue,d=a.split("."),f=d.length-1,h=d[f],m=e,p=this,E=0;E<f&&m&&p;E++)m=m[d[E]],p=p[d[E]];if(p&&"defaultValue"in n[o]&&(p[a]=c),m&&p){var g=m[h];void 0===g&&!l||(t&&s&&s(a,g),p[h]=u?u(a,g,r):g)}}},o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}e.default=n,t.exports=e.default},"limit-number.js":function(e,t,r){e.__esModule=!0,e.default=function(e,t,r){return Math.min(Math.max(t,e),r)},t.exports=e.default}}}}})("testcafe/src/client/driver/index")}initTestCafeClientDrivers(window)}();