'use strict';

exports.__esModule = true;

var _util = require('util');

var _debug = require('debug');

var _debug2 = _interopRequireDefault(_debug);

var _indentString = require('indent-string');

var _indentString2 = _interopRequireDefault(_indentString);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class TestRunDebugLog {
    constructor(userAgent) {
        this.driverMessageLogger = (0, _debug2.default)(`testcafe:test-run:${userAgent}:driver-message`);
        this.commandLogger = (0, _debug2.default)(`testcafe:test-run:${userAgent}:command`);
    }

    static _addEntry(logger, data) {
        try {
            const entry = data ? (0, _indentString2.default)(`\n${(0, _util.inspect)(data, { compact: false })}\n`, ' ', 4) : '';

            logger(entry);
        } catch (e) {
            logger(e.stack ? e.stack : String(e));
        }
    }

    driverMessage(msg) {
        TestRunDebugLog._addEntry(this.driverMessageLogger, msg);
    }

    command(cmd) {
        TestRunDebugLog._addEntry(this.commandLogger, cmd);
    }
}
exports.default = TestRunDebugLog;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0LXJ1bi9kZWJ1Zy1sb2cuanMiXSwibmFtZXMiOlsiVGVzdFJ1bkRlYnVnTG9nIiwiY29uc3RydWN0b3IiLCJ1c2VyQWdlbnQiLCJkcml2ZXJNZXNzYWdlTG9nZ2VyIiwiY29tbWFuZExvZ2dlciIsIl9hZGRFbnRyeSIsImxvZ2dlciIsImRhdGEiLCJlbnRyeSIsImNvbXBhY3QiLCJlIiwic3RhY2siLCJTdHJpbmciLCJkcml2ZXJNZXNzYWdlIiwibXNnIiwiY29tbWFuZCIsImNtZCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVlLE1BQU1BLGVBQU4sQ0FBc0I7QUFDakNDLGdCQUFhQyxTQUFiLEVBQXdCO0FBQ3BCLGFBQUtDLG1CQUFMLEdBQTJCLHFCQUFhLHFCQUFvQkQsU0FBVSxpQkFBM0MsQ0FBM0I7QUFDQSxhQUFLRSxhQUFMLEdBQTJCLHFCQUFhLHFCQUFvQkYsU0FBVSxVQUEzQyxDQUEzQjtBQUNIOztBQUVELFdBQU9HLFNBQVAsQ0FBa0JDLE1BQWxCLEVBQTBCQyxJQUExQixFQUFnQztBQUM1QixZQUFJO0FBQ0Esa0JBQU1DLFFBQVFELE9BQ1YsNEJBQWMsS0FBSSxtQkFBUUEsSUFBUixFQUFjLEVBQUVFLFNBQVMsS0FBWCxFQUFkLENBQWtDLElBQXBELEVBQXlELEdBQXpELEVBQThELENBQTlELENBRFUsR0FFVixFQUZKOztBQUlBSCxtQkFBT0UsS0FBUDtBQUNILFNBTkQsQ0FPQSxPQUFPRSxDQUFQLEVBQVU7QUFDTkosbUJBQU9JLEVBQUVDLEtBQUYsR0FBVUQsRUFBRUMsS0FBWixHQUFvQkMsT0FBT0YsQ0FBUCxDQUEzQjtBQUNIO0FBQ0o7O0FBRURHLGtCQUFlQyxHQUFmLEVBQW9CO0FBQ2hCZCx3QkFBZ0JLLFNBQWhCLENBQTBCLEtBQUtGLG1CQUEvQixFQUFvRFcsR0FBcEQ7QUFDSDs7QUFFREMsWUFBU0MsR0FBVCxFQUFjO0FBQ1ZoQix3QkFBZ0JLLFNBQWhCLENBQTBCLEtBQUtELGFBQS9CLEVBQThDWSxHQUE5QztBQUNIO0FBekJnQztrQkFBaEJoQixlIiwiZmlsZSI6InRlc3QtcnVuL2RlYnVnLWxvZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluc3BlY3QgfSBmcm9tICd1dGlsJztcbmltcG9ydCBkZWJ1Z0xvZ2dlciBmcm9tICdkZWJ1Zyc7XG5pbXBvcnQgaW5kZW50U3RyaW5nIGZyb20gJ2luZGVudC1zdHJpbmcnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXN0UnVuRGVidWdMb2cge1xuICAgIGNvbnN0cnVjdG9yICh1c2VyQWdlbnQpIHtcbiAgICAgICAgdGhpcy5kcml2ZXJNZXNzYWdlTG9nZ2VyID0gZGVidWdMb2dnZXIoYHRlc3RjYWZlOnRlc3QtcnVuOiR7dXNlckFnZW50fTpkcml2ZXItbWVzc2FnZWApO1xuICAgICAgICB0aGlzLmNvbW1hbmRMb2dnZXIgICAgICAgPSBkZWJ1Z0xvZ2dlcihgdGVzdGNhZmU6dGVzdC1ydW46JHt1c2VyQWdlbnR9OmNvbW1hbmRgKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgX2FkZEVudHJ5IChsb2dnZXIsIGRhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gZGF0YSA/XG4gICAgICAgICAgICAgICAgaW5kZW50U3RyaW5nKGBcXG4ke2luc3BlY3QoZGF0YSwgeyBjb21wYWN0OiBmYWxzZSB9KX1cXG5gLCAnICcsIDQpIDpcbiAgICAgICAgICAgICAgICAnJztcblxuICAgICAgICAgICAgbG9nZ2VyKGVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbG9nZ2VyKGUuc3RhY2sgPyBlLnN0YWNrIDogU3RyaW5nKGUpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRyaXZlck1lc3NhZ2UgKG1zZykge1xuICAgICAgICBUZXN0UnVuRGVidWdMb2cuX2FkZEVudHJ5KHRoaXMuZHJpdmVyTWVzc2FnZUxvZ2dlciwgbXNnKTtcbiAgICB9XG5cbiAgICBjb21tYW5kIChjbWQpIHtcbiAgICAgICAgVGVzdFJ1bkRlYnVnTG9nLl9hZGRFbnRyeSh0aGlzLmNvbW1hbmRMb2dnZXIsIGNtZCk7XG4gICAgfVxufVxuIl19
