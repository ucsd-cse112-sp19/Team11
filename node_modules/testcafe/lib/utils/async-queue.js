"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const pinkie_1 = __importDefault(require("pinkie"));
const actions = {};
function isInQueue(key) {
    return actions[key];
}
exports.isInQueue = isInQueue;
function addToQueue(key, asyncAction) {
    const action = actions[key] || pinkie_1.default.resolve();
    actions[key] = action.then(() => asyncAction());
    return actions[key];
}
exports.addToQueue = addToQueue;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXN5bmMtcXVldWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvYXN5bmMtcXVldWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxvREFBNkI7QUFFN0IsTUFBTSxPQUFPLEdBQUcsRUFBRyxDQUFDO0FBRXBCLFNBQWdCLFNBQVMsQ0FBRSxHQUFHO0lBQzFCLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLENBQUM7QUFGRCw4QkFFQztBQUVELFNBQWdCLFVBQVUsQ0FBRSxHQUFHLEVBQUUsV0FBVztJQUN4QyxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksZ0JBQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVqRCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBRWhELE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hCLENBQUM7QUFORCxnQ0FNQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ3BpbmtpZSc7XG5cbmNvbnN0IGFjdGlvbnMgPSB7IH07XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0luUXVldWUgKGtleSkge1xuICAgIHJldHVybiBhY3Rpb25zW2tleV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRUb1F1ZXVlIChrZXksIGFzeW5jQWN0aW9uKSB7XG4gICAgY29uc3QgYWN0aW9uID0gYWN0aW9uc1trZXldIHx8IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgYWN0aW9uc1trZXldID0gYWN0aW9uLnRoZW4oKCkgPT4gYXN5bmNBY3Rpb24oKSk7XG5cbiAgICByZXR1cm4gYWN0aW9uc1trZXldO1xufVxuIl19