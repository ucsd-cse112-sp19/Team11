'use strict';

exports.__esModule = true;

exports.default = function (filePath, expectedExtention) {
    filePath = filePath.replace(new RegExp((0, _lodash.escapeRegExp)(_path2.default.win32.sep), 'g'), _path2.default.posix.sep);

    const correctedPath = filePath.split(_path2.default.posix.sep).filter((fragment, index) => index === 0 || !!fragment).map(str => (0, _sanitizeFilename2.default)(str)).join(_path2.default.sep);

    if (!expectedExtention) return correctedPath;

    const extentionRe = new RegExp((0, _lodash.escapeRegExp)(expectedExtention));

    return extentionRe.test(correctedPath) ? correctedPath : `${correctedPath}.${expectedExtention}`;
};

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _sanitizeFilename = require('sanitize-filename');

var _sanitizeFilename2 = _interopRequireDefault(_sanitizeFilename);

var _lodash = require('lodash');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = exports['default'];
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9jb3JyZWN0LWZpbGUtcGF0aC5qcyJdLCJuYW1lcyI6WyJmaWxlUGF0aCIsImV4cGVjdGVkRXh0ZW50aW9uIiwicmVwbGFjZSIsIlJlZ0V4cCIsInBhdGgiLCJ3aW4zMiIsInNlcCIsInBvc2l4IiwiY29ycmVjdGVkUGF0aCIsInNwbGl0IiwiZmlsdGVyIiwiZnJhZ21lbnQiLCJpbmRleCIsIm1hcCIsInN0ciIsImpvaW4iLCJleHRlbnRpb25SZSIsInRlc3QiXSwibWFwcGluZ3MiOiI7Ozs7a0JBSWUsVUFBVUEsUUFBVixFQUFvQkMsaUJBQXBCLEVBQXVDO0FBQ2xERCxlQUFXQSxTQUFTRSxPQUFULENBQWlCLElBQUlDLE1BQUosQ0FBVywwQkFBU0MsZUFBS0MsS0FBTCxDQUFXQyxHQUFwQixDQUFYLEVBQXFDLEdBQXJDLENBQWpCLEVBQTRERixlQUFLRyxLQUFMLENBQVdELEdBQXZFLENBQVg7O0FBRUEsVUFBTUUsZ0JBQWdCUixTQUNqQlMsS0FEaUIsQ0FDWEwsZUFBS0csS0FBTCxDQUFXRCxHQURBLEVBRWpCSSxNQUZpQixDQUVWLENBQUNDLFFBQUQsRUFBV0MsS0FBWCxLQUFxQkEsVUFBVSxDQUFWLElBQWUsQ0FBQyxDQUFDRCxRQUY1QixFQUdqQkUsR0FIaUIsQ0FHYkMsT0FBTyxnQ0FBaUJBLEdBQWpCLENBSE0sRUFJakJDLElBSmlCLENBSVpYLGVBQUtFLEdBSk8sQ0FBdEI7O0FBTUEsUUFBSSxDQUFDTCxpQkFBTCxFQUNJLE9BQU9PLGFBQVA7O0FBRUosVUFBTVEsY0FBYyxJQUFJYixNQUFKLENBQVcsMEJBQVNGLGlCQUFULENBQVgsQ0FBcEI7O0FBRUEsV0FBT2UsWUFBWUMsSUFBWixDQUFpQlQsYUFBakIsSUFBa0NBLGFBQWxDLEdBQW1ELEdBQUVBLGFBQWMsSUFBR1AsaUJBQWtCLEVBQS9GO0FBQ0gsQzs7QUFuQkQ7Ozs7QUFDQTs7OztBQUNBIiwiZmlsZSI6InV0aWxzL2NvcnJlY3QtZmlsZS1wYXRoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgc2FuaXRpemVGaWxlbmFtZSBmcm9tICdzYW5pdGl6ZS1maWxlbmFtZSc7XG5pbXBvcnQgeyBlc2NhcGVSZWdFeHAgYXMgZXNjYXBlUmUgfSBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZmlsZVBhdGgsIGV4cGVjdGVkRXh0ZW50aW9uKSB7XG4gICAgZmlsZVBhdGggPSBmaWxlUGF0aC5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlUmUocGF0aC53aW4zMi5zZXApLCAnZycpLCBwYXRoLnBvc2l4LnNlcCk7XG5cbiAgICBjb25zdCBjb3JyZWN0ZWRQYXRoID0gZmlsZVBhdGhcbiAgICAgICAgLnNwbGl0KHBhdGgucG9zaXguc2VwKVxuICAgICAgICAuZmlsdGVyKChmcmFnbWVudCwgaW5kZXgpID0+IGluZGV4ID09PSAwIHx8ICEhZnJhZ21lbnQpXG4gICAgICAgIC5tYXAoc3RyID0+IHNhbml0aXplRmlsZW5hbWUoc3RyKSlcbiAgICAgICAgLmpvaW4ocGF0aC5zZXApO1xuXG4gICAgaWYgKCFleHBlY3RlZEV4dGVudGlvbilcbiAgICAgICAgcmV0dXJuIGNvcnJlY3RlZFBhdGg7XG5cbiAgICBjb25zdCBleHRlbnRpb25SZSA9IG5ldyBSZWdFeHAoZXNjYXBlUmUoZXhwZWN0ZWRFeHRlbnRpb24pKTtcblxuICAgIHJldHVybiBleHRlbnRpb25SZS50ZXN0KGNvcnJlY3RlZFBhdGgpID8gY29ycmVjdGVkUGF0aCA6IGAke2NvcnJlY3RlZFBhdGh9LiR7ZXhwZWN0ZWRFeHRlbnRpb259YDtcbn1cbiJdfQ==
